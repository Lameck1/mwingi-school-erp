
> mwingi-school-erp@1.0.0 test
> vitest --run


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/Users/lamec/OneDrive/Desktop/MWINGI ADVENTIST SCHOOL/mwingi-school-erp[39m

 [31mÎ“Â¥Â»[39m electron/main/services/reports/__tests__/CashFlowStatementService.test.ts [2m([22m[2m18 tests[22m[2m | [22m[31m18 failed[39m[2m)[22m[32m 61[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should generate complete cash flow statement[39m[32m 26[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate operating activities correctly[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate investing activities correctly[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate financing activities correctly[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate net cash flow correctly[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle empty date range[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should filter by date range correctly[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should assess liquidity position[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should identify healthy liquidity[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should identify critical liquidity issues[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate days of cash cover[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should generate cash flow forecast[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should base projections on historical data[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate confidence levels[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle custom periods[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle voided payments[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle negative balances[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle invalid date ranges[39m[32m 1[2mms[22m[39m
 [31mÎ“Â¥Â»[39m electron/main/services/finance/__tests__/PaymentService.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 22[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should record a valid payment[39m[32m 10[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should reject payment exceeding balance[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should reject payment in locked period[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should validate required fields[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should void a payment with valid reason[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should reject voiding without reason[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should reject voiding already voided payment[39m[32m 1[2mms[22m[39m
 [31mÎ“Â¥Â»[39m electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts [2m([22m[2m27 tests[22m[2m | [22m[31m27 failed[39m[2m)[22m[32m 88[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should auto-apply credits using FIFO strategy[39m[32m 33[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should prioritize oldest invoices first[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should create allocation records[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle exact match scenario[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle insufficient credit scenario[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle excess credit scenario[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should prioritize overdue invoices[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle student with no credits[39m[32m 5[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle student with no outstanding invoices[39m[32m 4[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should log audit trail[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should return available credit balance[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should return 0 for student with no credits[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should subtract allocated credits from balance[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle partial allocation[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should add manual credit[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should validate positive amount[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should validate student existence[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should require source information[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should log audit trail[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should return credit transaction history[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should include allocation details[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should filter by date range[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should show remaining balance per transaction[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle multiple credits for same student[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle concurrent allocation attempts[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle zero-amount credit gracefully[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle invoices with same due date[39m[32m 2[2mms[22m[39m
 [31mÎ“Â¥Â»[39m electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[32m 81[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should create level 1 approval for amount under 50,000[39m[32m 36[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should create level 2 approval for amount over 50,000[39m[32m 5[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should reject invalid request type[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should log audit trail on creation[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should approve level 1 and advance to level 2[39m[32m 4[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should reject level 1 and mark request as rejected[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should fully approve when level 2 approves[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should prevent approval of wrong level[39m[32m 6[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should return all pending approvals for level 1[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should return only level 2 pending after level 1 approval[39m[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should filter by request type[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should return complete approval history[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle zero amount gracefully[39m[32m 3[2mms[22m[39m
       [32mÎ“Â£Ã´[39m should handle missing approval level configuration[32m 2[2mms[22m[39m
 [31mÎ“Â¥Â»[39m electron/main/services/reports/__tests__/NEMISExportService.test.ts [2m([22m[2m35 tests[22m[2m | [22m[31m35 failed[39m[2m)[22m[32m 122[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should export student data in CSV format[39m[32m 32[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should export student data in JSON format[39m[32m 6[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should include all NEMIS-required fields[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should filter by grade[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should filter by gender[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should filter by date range[39m[32m 5[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle empty result set[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should create export record[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should log audit trail[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should export staff data in CSV format[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should include TSC numbers[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should filter by position[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should export financial summary[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should include revenue and collection metrics[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate collection rate correctly[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should aggregate by student[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should validate student data completeness[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should identify missing NEMIS UPI[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should identify missing birth dates[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should validate staff data[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should identify missing TSC numbers[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should return export history[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should filter by export type[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should filter by date range[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should order by most recent first[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should format data as CSV with headers[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should escape commas in values[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle empty array[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle null values[39m[32m 5[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should format data as pretty JSON[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle empty array[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle special characters in data[39m[32m 6[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle unicode characters[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle large datasets[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle invalid date formats[39m[32m 3[2mms[22m[39m
 [31mÎ“Â¥Â»[39m electron/main/services/finance/__tests__/FeeProrationService.test.ts [2m([22m[2m29 tests[22m[2m | [22m[31m29 failed[39m[2m)[22m[32m 131[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should generate pro-rated invoice for mid-term enrollment[39m[32m 36[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate correct proration percentage[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should apply proration to eligible fees[39m[32m 5[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should not prorate non-eligible fees[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should create proration audit log[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle enrollment on term start date[39m[32m 5[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle enrollment on last day of term[39m[32m 4[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should reject enrollment before term start[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should reject enrollment after term end[39m[32m 5[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should log audit trail[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should return proration breakdown[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should show original vs prorated amounts[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate total savings[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should validate date within term[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should reject date before term[39m[32m 15[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should reject date after term[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should accept term boundary dates[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate daily proration accurately[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should return 100% for full term[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle leap year correctly[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should round to 2 decimal places[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should return proration history for student[39m[32m 6[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should filter by date range[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should show term-wide proration statistics[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle student with no invoice templates[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle term with no current flag[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle very short term enrollment[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle invalid date format gracefully[39m[32m 4[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle duplicate proration attempts[39m[32m 3[2mms[22m[39m
 [31mÎ“Â¥Â»[39m electron/main/services/reports/__tests__/StudentLedgerService.test.ts [2m([22m[2m25 tests[22m[2m | [22m[31m25 failed[39m[2m)[22m[32m 144[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should generate complete ledger with opening balance[39m[32m 64[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate opening balance correctly[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should include all transactions in period[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should order transactions chronologically[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate running balance correctly[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate closing balance correctly[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should provide summary statistics[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should exclude voided transactions[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle empty period[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should validate ledger integrity[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should identify balanced ledger[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should detect invoice allocation discrepancies[39m[32m 11[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should provide reconciliation recommendations[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate opening balance for specific date[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should return 0 for student with no prior transactions[39m[32m 6[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle mid-period opening balance[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should exclude voided transactions from opening balance[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should validate mathematical accuracy[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should pass validation for correct ledger[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should detect negative running balances[39m[32m 4[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should detect missing transaction references[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle student with no transactions[39m[32m 5[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle date range before any transactions[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle invalid student ID[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle invalid date range[39m[32m 2[2mms[22m[39m
 [31mÎ“Â¥Â»[39m electron/main/services/reports/__tests__/AgedReceivablesService.test.ts [2m([22m[2m23 tests[22m[2m | [22m[31m23 failed[39m[2m)[22m[32m 98[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should categorize receivables by aging buckets[39m[32m 40[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate correct aging amounts[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate total receivables correctly[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should include student details in aging report[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate days overdue correctly[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle partially paid invoices[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should exclude fully paid invoices[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should assign HIGH priority to over 90 days[39m[32m 5[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should assign MEDIUM priority to 31-90 days[39m[32m 5[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should assign LOW priority to current invoices[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should include recommended actions[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should sort by priority and then by days overdue[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should generate reminders for overdue invoices[39m[32m 11[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate total overdue per student[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should personalize messages based on severity[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should not generate reminders for students with no overdue[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate collection metrics[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate collection rate correctly[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should identify collection trends[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should provide recommendations[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle no receivables[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle future date correctly[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle negative balances gracefully[39m[32m 1[2mms[22m[39m
 [31mÎ“Â¥Â»[39m electron/main/__tests__/integration/workflows.integration.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[32m 72[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should require approval before processing high-value payment[39m[32m 38[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should block payment if approval is rejected[39m[32m 5[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should create credit from overpayment and auto-apply to outstanding invoices[39m[32m 7[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle void payment Î“Ã¥Ã† reverse allocations Î“Ã¥Ã† restore invoices[39m[32m 5[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should allocate scholarship and reduce student invoice balance[39m[32m 4[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle scholarship revocation and credit reversal[39m[32m 4[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle full payment lifecycle: invoice Î“Ã¥Ã† payment Î“Ã¥Ã† allocation Î“Ã¥Ã† reconciliation[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should maintain complete audit trail across all operations[39m[32m 2[2mms[22m[39m
 [31mÎ“Â¥Â»[39m electron/main/services/finance/__tests__/ScholarshipService.test.ts [2m([22m[2m37 tests[22m[2m | [22m[31m37 failed[39m[2m)[22m[32m 143[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should create new scholarship[39m[32m 36[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should validate positive amount[39m[32m 7[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should validate date range[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should log audit trail[39m[32m 4[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should allocate scholarship to student[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should update scholarship available amount[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should prevent allocation exceeding available amount[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should prevent allocation to expired scholarship[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should prevent allocation to fully utilized scholarship[39m[32m 7[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should validate positive allocation amount[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should log audit trail[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should show scholarship utilization metrics[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate utilization percentage correctly[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should list all allocations[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should show 100% utilization for fully allocated scholarship[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should show 0% for unused scholarship[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should return all scholarships for student[39m[32m 8[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate total scholarship amount[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should filter by status[39m[32m 5[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should return empty array for student with no scholarships[39m[32m 7[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should validate active scholarship[39m[32m 5[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should detect insufficient funds[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should detect expired scholarship[39m[32m 5[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should detect non-existent scholarship[39m[32m 5[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should detect non-existent student[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should return active scholarships with funds[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should filter by scholarship type[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should exclude expired scholarships[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should exclude fully utilized scholarships[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should revoke scholarship allocation[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should restore scholarship available amount[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should require revocation reason[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should prevent revoking already revoked allocation[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should log audit trail[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle scholarship with zero total amount[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle multiple allocations to same student[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle allocation on scholarship boundary dates[39m[32m 2[2mms[22m[39m
 [31mÎ“Â¥Â»[39m electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts [2m([22m[2m32 tests[22m[2m | [22m[31m32 failed[39m[2m)[22m[32m 168[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate transport segment metrics[39m[32m 70[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate transport revenue correctly[39m[32m 5[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate transport expenses correctly[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate net profit correctly[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate profit margin percentage[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should count students served correctly[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate per-student metrics[39m[32m 4[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate boarding segment metrics[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate boarding revenue correctly[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate boarding expenses correctly[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate net profit correctly[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should identify low margins[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should count students served correctly[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate activity fee metrics[39m[32m 22[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate total activity revenue[39m[32m 10[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should break down by activity[39m[32m 4[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should identify most profitable activities[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate net profit after expenses[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should provide comprehensive profitability analysis[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate total revenue across segments[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate total expenses across segments[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate overall net profit[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should calculate overall profit margin[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should identify most and least profitable segments[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should provide strategic recommendations[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should provide comparative segment analysis[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should rank segments by profitability[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should show segment contribution to total revenue[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle segment with no revenue[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle segment with no expenses[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle empty date range[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle invalid date range[39m[32m 3[2mms[22m[39m
 [32mÎ“Â£Ã´[39m electron/main/__tests__/security.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mÎ“Â£Ã´[39m electron/main/services/finance/__tests__/PeriodLockingService.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 25[2mms[22m[39m
[90mstdout[2m | electron/main/__tests__/ipc-handlers.test.ts
[22m[39mInitializing report scheduler...
Report scheduler initialized

[90mstdout[2m | electron/main/__tests__/modular-ipc.test.ts
[22m[39mInitializing report scheduler...
Report scheduler initialized

 [32mÎ“Â£Ã´[39m electron/main/__tests__/ipc-handlers.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mÎ“Â£Ã´[39m electron/main/__tests__/modular-ipc.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 13[2mms[22m[39m

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Tests 251 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL  electron/main/__tests__/integration/workflows.integration.test.ts > Integration Tests > Approval Workflow + Payment Process > should require approval before processing high-value payment
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 Î“Â¥Â» electron/main/__tests__/integration/workflows.integration.test.ts:184:39
    182|       })
    183| 
    184|       expect(approvalRequest.success).toBe(true)
       |                                       ^
    185|       expect(approvalRequest.requiredLevel).toBe(2)
    186| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/251]Î“Ã„Â»

 FAIL  electron/main/__tests__/integration/workflows.integration.test.ts > Integration Tests > Approval Workflow + Payment Process > should block payment if approval is rejected
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 Î“Â¥Â» electron/main/__tests__/integration/workflows.integration.test.ts:251:33
    249|       })
    250| 
    251|       expect(rejection.success).toBe(true)
       |                                 ^
    252| 
    253|       // Verify approval is rejected

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[2/251]Î“Ã„Â»

 FAIL  electron/main/__tests__/integration/workflows.integration.test.ts > Integration Tests > Payment Î“Ã¥Ã† Credit Î“Ã¥Ã† Auto-Application Flow > should create credit from overpayment and auto-apply to outstanding invoices
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 Î“Â¥Â» electron/main/__tests__/integration/workflows.integration.test.ts:276:31
    274|       })
    275| 
    276|       expect(payment.success).toBe(true)
       |                               ^
    277| 
    278|       // Verify all invoices are paid

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[3/251]Î“Ã„Â»

 FAIL  electron/main/__tests__/integration/workflows.integration.test.ts > Integration Tests > Payment Î“Ã¥Ã† Credit Î“Ã¥Ã† Auto-Application Flow > should handle void payment Î“Ã¥Ã† reverse allocations Î“Ã¥Ã† restore invoices
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 Î“Â¥Â» electron/main/__tests__/integration/workflows.integration.test.ts:328:31
    326|       })
    327| 
    328|       expect(payment.success).toBe(true)
       |                               ^
    329| 
    330|       // Verify invoice is paid

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[4/251]Î“Ã„Â»

 FAIL  electron/main/__tests__/integration/workflows.integration.test.ts > Integration Tests > Scholarship Allocation + Invoice Payment Flow > should allocate scholarship and reduce student invoice balance
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 Î“Â¥Â» electron/main/__tests__/integration/workflows.integration.test.ts:375:35
    373|       })
    374| 
    375|       expect(scholarship.success).toBe(true)
       |                                   ^
    376| 
    377|       // Step 2: Allocate scholarship to student

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[5/251]Î“Ã„Â»

 FAIL  electron/main/__tests__/integration/workflows.integration.test.ts > Integration Tests > Scholarship Allocation + Invoice Payment Flow > should handle scholarship revocation and credit reversal
TypeError: scholarshipService.allocateScholarship is not a function
 Î“Â¥Â» electron/main/__tests__/integration/workflows.integration.test.ts:426:45
    424|       })
    425| 
    426|       const allocation = scholarshipService.allocateScholarship({
       |                                             ^
    427|         studentId: 1,
    428|         scholarshipId: scholarship.scholarshipId!,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[6/251]Î“Ã„Â»

 FAIL  electron/main/__tests__/integration/workflows.integration.test.ts > Integration Tests > Complete Student Payment Lifecycle > should handle full payment lifecycle: invoice Î“Ã¥Ã† payment Î“Ã¥Ã† allocation Î“Ã¥Ã† reconciliation
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 Î“Â¥Â» electron/main/__tests__/integration/workflows.integration.test.ts:473:32
    471|       })
    472| 
    473|       expect(payment1.success).toBe(true)
       |                                ^
    474| 
    475|       // Verify first invoice is fully paid, second is partially paid

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[7/251]Î“Ã„Â»

 FAIL  electron/main/__tests__/integration/workflows.integration.test.ts > Integration Tests > Audit Trail Integration > should maintain complete audit trail across all operations
TypeError: creditService.addCredit is not a function
 Î“Â¥Â» electron/main/__tests__/integration/workflows.integration.test.ts:533:21
    531|       })
    532| 
    533|       creditService.addCredit({
       |                     ^
    534|         studentId: 1,
    535|         amount: 10000,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[8/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > autoApplyCredits > should auto-apply credits using FIFO strategy
TypeError: service.autoApplyCredits is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:89:30
     87|   describe('autoApplyCredits', () => {
     88|     it('should auto-apply credits using FIFO strategy', () => {
     89|       const result = service.autoApplyCredits(1)
       |                              ^
     90| 
     91|       expect(result.success).toBe(true)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[9/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > autoApplyCredits > should prioritize oldest invoices first
TypeError: service.autoApplyCredits is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:97:15
     95| 
     96|     it('should prioritize oldest invoices first', () => {
     97|       service.autoApplyCredits(1)
       |               ^
     98| 
     99|       // Check first invoice (oldest due date) is fully paid

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[10/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > autoApplyCredits > should create allocation records
TypeError: service.autoApplyCredits is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:116:15
    114| 
    115|     it('should create allocation records', () => {
    116|       service.autoApplyCredits(1)
       |               ^
    117| 
    118|       const allocations = db.prepare('SELECT * FROM credit_allocation'Î“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[11/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > autoApplyCredits > should handle exact match scenario
TypeError: service.autoApplyCredits is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:130:30
    128|       db.exec('UPDATE credit_transaction SET amount = 80000')
    129| 
    130|       const result = service.autoApplyCredits(1)
       |                              ^
    131| 
    132|       expect(result.creditsApplied).toBe(80000)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[12/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > autoApplyCredits > should handle insufficient credit scenario
TypeError: service.autoApplyCredits is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:145:30
    143|       db.exec('UPDATE credit_transaction SET amount = 30000')
    144| 
    145|       const result = service.autoApplyCredits(1)
       |                              ^
    146| 
    147|       expect(result.creditsApplied).toBe(30000)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[13/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > autoApplyCredits > should handle excess credit scenario
TypeError: service.autoApplyCredits is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:159:30
    157|       db.exec('UPDATE credit_transaction SET amount = 150000')
    158| 
    159|       const result = service.autoApplyCredits(1)
       |                              ^
    160| 
    161|       expect(result.creditsApplied).toBe(100000) // Total of all invoiÎ“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[14/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > autoApplyCredits > should prioritize overdue invoices
TypeError: service.autoApplyCredits is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:175:15
    173|       db.exec(`UPDATE invoice SET due_date = '2025-12-01' WHERE invoicÎ“Ã‡Âª
    174| 
    175|       service.autoApplyCredits(1)
       |               ^
    176| 
    177|       // Overdue invoice should be paid first

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[15/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > autoApplyCredits > should handle student with no credits
TypeError: service.autoApplyCredits is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:186:30
    184|       db.exec('DELETE FROM credit_transaction')
    185| 
    186|       const result = service.autoApplyCredits(1)
       |                              ^
    187| 
    188|       expect(result.success).toBe(true)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[16/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > autoApplyCredits > should handle student with no outstanding invoices
TypeError: service.autoApplyCredits is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:196:30
    194|       db.exec(`UPDATE invoice SET paid_amount = amount, status = 'PAIDÎ“Ã‡Âª
    195| 
    196|       const result = service.autoApplyCredits(1)
       |                              ^
    197| 
    198|       expect(result.success).toBe(true)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[17/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > autoApplyCredits > should log audit trail
TypeError: service.autoApplyCredits is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:204:15
    202| 
    203|     it('should log audit trail', () => {
    204|       service.autoApplyCredits(1)
       |               ^
    205| 
    206|       const auditLogs = db.prepare('SELECT * FROM audit_log WHERE actiÎ“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[18/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > getCreditBalance > should return available credit balance
TypeError: service.getCreditBalance is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:213:31
    211|   describe('getCreditBalance', () => {
    212|     it('should return available credit balance', () => {
    213|       const balance = service.getCreditBalance(1)
       |                               ^
    214| 
    215|       expect(balance).toBe(70000)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[19/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > getCreditBalance > should return 0 for student with no credits
SqliteError: no such column: "New" - should this be a string literal in single-quotes?
 Î“Â¥Â» Database.exec node_modules/better-sqlite3-multiple-ciphers/lib/methods/wrappers.js:19:14
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:219:10
    217| 
    218|     it('should return 0 for student with no credits', () => {
    219|       db.exec('INSERT INTO student (first_name, last_name, admission_nÎ“Ã‡Âª
       |          ^
    220| 
    221|       const balance = service.getCreditBalance(2)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[20/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > getCreditBalance > should subtract allocated credits from balance
TypeError: service.autoApplyCredits is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:227:15
    225| 
    226|     it('should subtract allocated credits from balance', () => {
    227|       service.autoApplyCredits(1)
       |               ^
    228| 
    229|       const balance = service.getCreditBalance(1)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[21/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > getCreditBalance > should handle partial allocation
TypeError: service.autoApplyCredits is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:236:15
    234|     it('should handle partial allocation', () => {
    235|       db.exec('UPDATE credit_transaction SET amount = 30000')
    236|       service.autoApplyCredits(1)
       |               ^
    237| 
    238|       const balance = service.getCreditBalance(1)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[22/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > addCredit > should add manual credit
TypeError: service.addCredit is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:246:30
    244|   describe('addCredit', () => {
    245|     it('should add manual credit', () => {
    246|       const result = service.addCredit({
       |                              ^
    247|         studentId: 1,
    248|         amount: 50000,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[23/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > addCredit > should validate positive amount
TypeError: service.addCredit is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:261:30
    259| 
    260|     it('should validate positive amount', () => {
    261|       const result = service.addCredit({
       |                              ^
    262|         studentId: 1,
    263|         amount: -10000,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[24/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > addCredit > should validate student existence
TypeError: service.addCredit is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:273:30
    271| 
    272|     it('should validate student existence', () => {
    273|       const result = service.addCredit({
       |                              ^
    274|         studentId: 999,
    275|         amount: 10000,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[25/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > addCredit > should require source information
TypeError: service.addCredit is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:285:30
    283| 
    284|     it('should require source information', () => {
    285|       const result = service.addCredit({
       |                              ^
    286|         studentId: 1,
    287|         amount: 10000,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[26/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > addCredit > should log audit trail
TypeError: service.addCredit is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:297:15
    295| 
    296|     it('should log audit trail', () => {
    297|       service.addCredit({
       |               ^
    298|         studentId: 1,
    299|         amount: 50000,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[27/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > getCreditHistory > should return credit transaction history
TypeError: service.getCreditHistory is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:312:31
    310|   describe('getCreditHistory', () => {
    311|     it('should return credit transaction history', () => {
    312|       const history = service.getCreditHistory(1)
       |                               ^
    313| 
    314|       expect(history).toHaveLength(1)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[28/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > getCreditHistory > should include allocation details
TypeError: service.autoApplyCredits is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:320:15
    318| 
    319|     it('should include allocation details', () => {
    320|       service.autoApplyCredits(1)
       |               ^
    321| 
    322|       const history = service.getCreditHistory(1)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[29/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > getCreditHistory > should filter by date range
TypeError: service.addCredit is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:329:15
    327| 
    328|     it('should filter by date range', () => {
    329|       service.addCredit({
       |               ^
    330|         studentId: 1,
    331|         amount: 10000,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[30/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > getCreditHistory > should show remaining balance per transaction
TypeError: service.autoApplyCredits is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:342:15
    340| 
    341|     it('should show remaining balance per transaction', () => {
    342|       service.autoApplyCredits(1)
       |               ^
    343| 
    344|       const history = service.getCreditHistory(1)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[31/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > edge cases > should handle multiple credits for same student
TypeError: service.getCreditBalance is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:357:31
    355|       `)
    356| 
    357|       const balance = service.getCreditBalance(1)
       |                               ^
    358|       expect(balance).toBe(100000) // 70000 + 30000
    359|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[32/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > edge cases > should handle concurrent allocation attempts
TypeError: service.autoApplyCredits is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:363:31
    361|     it('should handle concurrent allocation attempts', () => {
    362|       // This is more of a database integrity test
    363|       const result1 = service.autoApplyCredits(1)
       |                               ^
    364|       const result2 = service.autoApplyCredits(1)
    365| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[33/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > edge cases > should handle zero-amount credit gracefully
TypeError: service.addCredit is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:371:30
    369| 
    370|     it('should handle zero-amount credit gracefully', () => {
    371|       const result = service.addCredit({
       |                              ^
    372|         studentId: 1,
    373|         amount: 0,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[34/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts > CreditAutoApplicationService > edge cases > should handle invoices with same due date
TypeError: service.autoApplyCredits is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/CreditAutoApplicationService.test.ts:385:30
    383|       db.exec(`UPDATE invoice SET due_date = '2026-01-15'`)
    384| 
    385|       const result = service.autoApplyCredits(1)
       |                              ^
    386| 
    387|       // Should still allocate, using created_at as tiebreaker

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[35/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > generateProRatedInvoice > should generate pro-rated invoice for mid-term enrollment
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:114:30
    112|       })
    113| 
    114|       expect(result.success).toBe(true)
       |                              ^
    115|       expect(result.invoicesGenerated).toBeGreaterThan(0)
    116|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[36/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > generateProRatedInvoice > should calculate correct proration percentage
TypeError: Cannot read properties of undefined (reading 'days_in_term')
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:131:27
    129|       // Enrolled: Jan 15 to Mar 31 = 76 days
    130|       // Percentage: (76/90) * 100 = 84.44%
    131|       expect(prorationLog.days_in_term).toBe(90)
       |                           ^
    132|       expect(prorationLog.days_enrolled).toBe(76)
    133|       expect(prorationLog.proration_percentage).toBeCloseTo(84.44, 1)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[37/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > generateProRatedInvoice > should apply proration to eligible fees
SqliteError: no such table: invoice
 Î“Â¥Â» Database.prepare node_modules/better-sqlite3-multiple-ciphers/lib/methods/wrappers.js:5:21
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:144:27
    142|       })
    143| 
    144|       const invoices = db.prepare('SELECT * FROM invoice WHERE studentÎ“Ã‡Âª
       |                           ^
    145| 
    146|       // Check tuition (60000 * 0.8444 = 50664)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[38/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > generateProRatedInvoice > should not prorate non-eligible fees
SqliteError: no such table: invoice
 Î“Â¥Â» Database.prepare node_modules/better-sqlite3-multiple-ciphers/lib/methods/wrappers.js:5:21
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:165:27
    163|       })
    164| 
    165|       const invoices = db.prepare('SELECT * FROM invoice WHERE studentÎ“Ã‡Âª
       |                           ^
    166| 
    167|       // Activity fee should not be prorated

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[39/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > generateProRatedInvoice > should create proration audit log
AssertionError: expected 0 to be greater than 0
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:182:36
    180| 
    181|       const prorationLogs = db.prepare('SELECT * FROM pro_ration_log WÎ“Ã‡Âª
    182|       expect(prorationLogs.length).toBeGreaterThan(0)
       |                                    ^
    183| 
    184|       prorationLogs.forEach(log => {

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[40/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > generateProRatedInvoice > should handle enrollment on term start date
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:200:30
    198|       })
    199| 
    200|       expect(result.success).toBe(true)
       |                              ^
    201| 
    202|       const prorationLog = db.prepare('SELECT * FROM pro_ration_log WHÎ“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[41/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > generateProRatedInvoice > should handle enrollment on last day of term
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:214:30
    212|       })
    213| 
    214|       expect(result.success).toBe(true)
       |                              ^
    215| 
    216|       const prorationLog = db.prepare('SELECT * FROM pro_ration_log WHÎ“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[42/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > generateProRatedInvoice > should reject enrollment before term start
AssertionError: expected undefined to be false // Object.is equality

- Expected: 
false

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:230:30
    228|       })
    229| 
    230|       expect(result.success).toBe(false)
       |                              ^
    231|       expect(result.message).toContain('before term start')
    232|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[43/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > generateProRatedInvoice > should reject enrollment after term end
AssertionError: expected undefined to be false // Object.is equality

- Expected: 
false

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:242:30
    240|       })
    241| 
    242|       expect(result.success).toBe(false)
       |                              ^
    243|       expect(result.message).toContain('after term end')
    244|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[44/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > generateProRatedInvoice > should log audit trail
AssertionError: expected 0 to be greater than 0
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:255:32
    253| 
    254|       const auditLogs = db.prepare('SELECT * FROM audit_log WHERE actiÎ“Ã‡Âª
    255|       expect(auditLogs.length).toBeGreaterThan(0)
       |                                ^
    256|       expect(auditLogs[0].user_id).toBe(10)
    257|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[45/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > getProrationDetails > should return proration breakdown
TypeError: service.getProrationDetails is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:271:31
    269| 
    270|     it('should return proration breakdown', () => {
    271|       const details = service.getProrationDetails(1)
       |                               ^
    272| 
    273|       expect(details).toHaveProperty('student')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[46/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > getProrationDetails > should show original vs prorated amounts
TypeError: service.getProrationDetails is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:281:31
    279| 
    280|     it('should show original vs prorated amounts', () => {
    281|       const details = service.getProrationDetails(1)
       |                               ^
    282| 
    283|       expect(details.invoices.length).toBeGreaterThan(0)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[47/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > getProrationDetails > should calculate total savings
TypeError: service.getProrationDetails is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:293:31
    291| 
    292|     it('should calculate total savings', () => {
    293|       const details = service.getProrationDetails(1)
       |                               ^
    294| 
    295|       expect(details).toHaveProperty('totalOriginalAmount')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[48/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > validateEnrollmentDate > should validate date within term
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:308:30
    306|       const result = service.validateEnrollmentDate('2026-01-15')
    307| 
    308|       expect(result.isValid).toBe(true)
       |                              ^
    309|       expect(result.term).toBeDefined()
    310|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[49/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > validateEnrollmentDate > should reject date before term
AssertionError: expected undefined to be false // Object.is equality

- Expected: 
false

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:315:30
    313|       const result = service.validateEnrollmentDate('2025-12-01')
    314| 
    315|       expect(result.isValid).toBe(false)
       |                              ^
    316|       expect(result.reason).toContain('No active term')
    317|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[50/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > validateEnrollmentDate > should reject date after term
AssertionError: expected undefined to be false // Object.is equality

- Expected: 
false

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:322:30
    320|       const result = service.validateEnrollmentDate('2026-04-15')
    321| 
    322|       expect(result.isValid).toBe(false)
       |                              ^
    323|       expect(result.reason).toContain('No active term')
    324|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[51/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > validateEnrollmentDate > should accept term boundary dates
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:328:35
    326|     it('should accept term boundary dates', () => {
    327|       const startResult = service.validateEnrollmentDate('2026-01-01')
    328|       expect(startResult.isValid).toBe(true)
       |                                   ^
    329| 
    330|       const endResult = service.validateEnrollmentDate('2026-03-31')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[52/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > calculateProrationPercentage > should calculate daily proration accurately
TypeError: service.calculateProrationPercentage is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:337:34
    335|   describe('calculateProrationPercentage', () => {
    336|     it('should calculate daily proration accurately', () => {
    337|       const percentage = service.calculateProrationPercentage('2026-01Î“Ã‡Âª
       |                                  ^
    338| 
    339|       // 76 days enrolled / 90 days total = 84.44%

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[53/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > calculateProrationPercentage > should return 100% for full term
TypeError: service.calculateProrationPercentage is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:344:34
    342| 
    343|     it('should return 100% for full term', () => {
    344|       const percentage = service.calculateProrationPercentage('2026-01Î“Ã‡Âª
       |                                  ^
    345| 
    346|       expect(percentage).toBe(100)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[54/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > calculateProrationPercentage > should handle leap year correctly
TypeError: service.calculateProrationPercentage is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:351:34
    349|     it('should handle leap year correctly', () => {
    350|       // 2024 is a leap year
    351|       const percentage = service.calculateProrationPercentage('2024-02Î“Ã‡Âª
       |                                  ^
    352| 
    353|       // 15 days enrolled / 29 days total = 51.72%

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[55/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > calculateProrationPercentage > should round to 2 decimal places
TypeError: service.calculateProrationPercentage is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:358:34
    356| 
    357|     it('should round to 2 decimal places', () => {
    358|       const percentage = service.calculateProrationPercentage('2026-01Î“Ã‡Âª
       |                                  ^
    359| 
    360|       expect(percentage.toString().split('.')[1]?.length || 0).toBeLesÎ“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[56/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > getProrationHistory > should return proration history for student
TypeError: service.getProrationHistory is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:375:31
    373| 
    374|     it('should return proration history for student', () => {
    375|       const history = service.getProrationHistory(1)
       |                               ^
    376| 
    377|       expect(history.length).toBeGreaterThan(0)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[57/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > getProrationHistory > should filter by date range
TypeError: service.getProrationHistory is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:386:31
    384| 
    385|     it('should filter by date range', () => {
    386|       const history = service.getProrationHistory(1, '2026-01-01', '20Î“Ã‡Âª
       |                               ^
    387| 
    388|       expect(history.length).toBeGreaterThan(0)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[58/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > getProrationHistory > should show term-wide proration statistics
TypeError: service.getProrationHistory is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:392:29
    390| 
    391|     it('should show term-wide proration statistics', () => {
    392|       const stats = service.getProrationHistory(1)
       |                             ^
    393| 
    394|       const totalDiscount = stats.reduce((sum, s) => sum + (s.originalÎ“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[59/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > edge cases > should handle student with no invoice templates
AssertionError: expected undefined to be false // Object.is equality

- Expected: 
false

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:410:30
    408|       })
    409| 
    410|       expect(result.success).toBe(false)
       |                              ^
    411|       expect(result.message).toContain('No invoice templates')
    412|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[60/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > edge cases > should handle term with no current flag
AssertionError: expected undefined to be false // Object.is equality

- Expected: 
false

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:419:30
    417|       const result = service.validateEnrollmentDate('2026-01-15')
    418| 
    419|       expect(result.isValid).toBe(false)
       |                              ^
    420|     })
    421| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[61/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > edge cases > should handle very short term enrollment
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:431:30
    429|       })
    430| 
    431|       expect(result.success).toBe(true)
       |                              ^
    432| 
    433|       const prorationLog = db.prepare('SELECT * FROM pro_ration_log WHÎ“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[62/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > edge cases > should handle invalid date format gracefully
AssertionError: expected [Function] to throw an error
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:441:10
    439|       expect(() => {
    440|         service.validateEnrollmentDate('invalid-date')
    441|       }).toThrow()
       |          ^
    442|     })
    443| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[63/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/FeeProrationService.test.ts > FeeProrationService > edge cases > should handle duplicate proration attempts
AssertionError: expected Promise{Î“Ã‡Âª} to have property "success"
 Î“Â¥Â» electron/main/services/finance/__tests__/FeeProrationService.test.ts:461:22
    459| 
    460|       // Should either prevent duplicate or handle gracefully
    461|       expect(result).toHaveProperty('success')
       |                      ^
    462|     })
    463|   })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[64/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/PaymentService.test.ts > PaymentService > recordPayment > should record a valid payment
 FAIL  electron/main/services/finance/__tests__/PaymentService.test.ts > PaymentService > recordPayment > should reject payment exceeding balance
 FAIL  electron/main/services/finance/__tests__/PaymentService.test.ts > PaymentService > recordPayment > should reject payment in locked period
 FAIL  electron/main/services/finance/__tests__/PaymentService.test.ts > PaymentService > recordPayment > should validate required fields
 FAIL  electron/main/services/finance/__tests__/PaymentService.test.ts > PaymentService > voidPayment > should void a payment with valid reason
 FAIL  electron/main/services/finance/__tests__/PaymentService.test.ts > PaymentService > voidPayment > should reject voiding without reason
 FAIL  electron/main/services/finance/__tests__/PaymentService.test.ts > PaymentService > voidPayment > should reject voiding already voided payment
TypeError: __vite_ssr_import_0__.vi.mocked(...).mockReturnValue is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/PaymentService.test.ts:22:32
     20|             transaction: vi.fn((fn) => fn)
     21|         }
     22|         vi.mocked(getDatabase).mockReturnValue(mockDb)
       |                                ^
     23| 
     24|         // Re-import to ensure mocks are applied

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[65/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > createScholarship > should create new scholarship
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:102:30
    100|       })
    101| 
    102|       expect(result.success).toBe(true)
       |                              ^
    103|       expect(result.scholarshipId).toBeGreaterThan(0)
    104| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[66/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > createScholarship > should validate positive amount
AssertionError: expected undefined to be false // Object.is equality

- Expected: 
false

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:121:30
    119|       })
    120| 
    121|       expect(result.success).toBe(false)
       |                              ^
    122|       expect(result.message).toContain('positive')
    123|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[67/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > createScholarship > should validate date range
AssertionError: expected undefined to be false // Object.is equality

- Expected: 
false

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:135:30
    133|       })
    134| 
    135|       expect(result.success).toBe(false)
       |                              ^
    136|       expect(result.message).toContain('after start date')
    137|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[68/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > createScholarship > should log audit trail
AssertionError: expected 0 to be greater than 0
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:150:32
    148| 
    149|       const auditLogs = db.prepare('SELECT * FROM audit_log WHERE actiÎ“Ã‡Âª
    150|       expect(auditLogs.length).toBeGreaterThan(0)
       |                                ^
    151|       expect(auditLogs[0].user_id).toBe(10)
    152|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[69/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > allocateScholarship > should allocate scholarship to student
TypeError: service.allocateScholarship is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:157:30
    155|   describe('allocateScholarship', () => {
    156|     it('should allocate scholarship to student', () => {
    157|       const result = service.allocateScholarship({
       |                              ^
    158|         studentId: 1,
    159|         scholarshipId: 1,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[70/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > allocateScholarship > should update scholarship available amount
TypeError: service.allocateScholarship is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:176:15
    174| 
    175|     it('should update scholarship available amount', () => {
    176|       service.allocateScholarship({
       |               ^
    177|         studentId: 1,
    178|         scholarshipId: 1,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[71/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > allocateScholarship > should prevent allocation exceeding available amount
TypeError: service.allocateScholarship is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:190:30
    188| 
    189|     it('should prevent allocation exceeding available amount', () => {
    190|       const result = service.allocateScholarship({
       |                              ^
    191|         studentId: 1,
    192|         scholarshipId: 1,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[72/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > allocateScholarship > should prevent allocation to expired scholarship
TypeError: service.allocateScholarship is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:203:30
    201| 
    202|     it('should prevent allocation to expired scholarship', () => {
    203|       const result = service.allocateScholarship({
       |                              ^
    204|         studentId: 1,
    205|         scholarshipId: 4, // Expired scholarship

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[73/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > allocateScholarship > should prevent allocation to fully utilized scholarship
TypeError: service.allocateScholarship is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:216:30
    214| 
    215|     it('should prevent allocation to fully utilized scholarship', () =Î“Ã‡Âª
    216|       const result = service.allocateScholarship({
       |                              ^
    217|         studentId: 1,
    218|         scholarshipId: 3, // Sports Excellence - fully allocated

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[74/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > allocateScholarship > should validate positive allocation amount
TypeError: service.allocateScholarship is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:229:30
    227| 
    228|     it('should validate positive allocation amount', () => {
    229|       const result = service.allocateScholarship({
       |                              ^
    230|         studentId: 1,
    231|         scholarshipId: 1,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[75/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > allocateScholarship > should log audit trail
TypeError: service.allocateScholarship is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:242:15
    240| 
    241|     it('should log audit trail', () => {
    242|       service.allocateScholarship({
       |               ^
    243|         studentId: 1,
    244|         scholarshipId: 1,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[76/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > getScholarshipUtilization > should show scholarship utilization metrics
 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > getScholarshipUtilization > should calculate utilization percentage correctly
 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > getScholarshipUtilization > should list all allocations
 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > getScholarshipUtilization > should show 100% utilization for fully allocated scholarship
 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > getScholarshipUtilization > should show 0% for unused scholarship
TypeError: service.allocateScholarship is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:258:15
    256|   describe('getScholarshipUtilization', () => {
    257|     beforeEach(() => {
    258|       service.allocateScholarship({
       |               ^
    259|         studentId: 1,
    260|         scholarshipId: 1,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[77/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > getStudentScholarships > should return all scholarships for student
 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > getStudentScholarships > should calculate total scholarship amount
 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > getStudentScholarships > should filter by status
 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > getStudentScholarships > should return empty array for student with no scholarships
TypeError: service.allocateScholarship is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:329:15
    327|   describe('getStudentScholarships', () => {
    328|     beforeEach(() => {
    329|       service.allocateScholarship({
       |               ^
    330|         studentId: 1,
    331|         scholarshipId: 1,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[78/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > validateScholarshipEligibility > should validate active scholarship
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:384:33
    382|       const result = service.validateScholarshipEligibility(1, 1)
    383| 
    384|       expect(result.isEligible).toBe(true)
       |                                 ^
    385|       expect(result.reason).toBeNull()
    386|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[79/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > validateScholarshipEligibility > should detect insufficient funds
AssertionError: expected undefined to be false // Object.is equality

- Expected: 
false

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:391:33
    389|       const result = service.validateScholarshipEligibility(1, 3) // FÎ“Ã‡Âª
    390| 
    391|       expect(result.isEligible).toBe(false)
       |                                 ^
    392|       expect(result.reason).toContain('no funds')
    393|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[80/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > validateScholarshipEligibility > should detect expired scholarship
AssertionError: expected undefined to be false // Object.is equality

- Expected: 
false

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:398:33
    396|       const result = service.validateScholarshipEligibility(1, 4) // EÎ“Ã‡Âª
    397| 
    398|       expect(result.isEligible).toBe(false)
       |                                 ^
    399|       expect(result.reason).toContain('expired')
    400|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[81/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > validateScholarshipEligibility > should detect non-existent scholarship
AssertionError: expected undefined to be false // Object.is equality

- Expected: 
false

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:405:33
    403|       const result = service.validateScholarshipEligibility(1, 999)
    404| 
    405|       expect(result.isEligible).toBe(false)
       |                                 ^
    406|       expect(result.reason).toContain('not found')
    407|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[82/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > validateScholarshipEligibility > should detect non-existent student
AssertionError: expected undefined to be false // Object.is equality

- Expected: 
false

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:412:33
    410|       const result = service.validateScholarshipEligibility(999, 1)
    411| 
    412|       expect(result.isEligible).toBe(false)
       |                                 ^
    413|       expect(result.reason).toContain('not found')
    414|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[83/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > getAvailableScholarships > should return active scholarships with funds
TypeError: service.getAvailableScholarships is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:419:36
    417|   describe('getAvailableScholarships', () => {
    418|     it('should return active scholarships with funds', () => {
    419|       const scholarships = service.getAvailableScholarships()
       |                                    ^
    420| 
    421|       expect(scholarships.length).toBeGreaterThan(0)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[84/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > getAvailableScholarships > should filter by scholarship type
TypeError: service.getAvailableScholarships is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:429:41
    427| 
    428|     it('should filter by scholarship type', () => {
    429|       const meritScholarships = service.getAvailableScholarships('MERIÎ“Ã‡Âª
       |                                         ^
    430| 
    431|       meritScholarships.forEach(s => {

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[85/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > getAvailableScholarships > should exclude expired scholarships
TypeError: service.getAvailableScholarships is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:437:36
    435| 
    436|     it('should exclude expired scholarships', () => {
    437|       const scholarships = service.getAvailableScholarships()
       |                                    ^
    438| 
    439|       const expired = scholarships.find(s => s.status === 'EXPIRED')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[86/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > getAvailableScholarships > should exclude fully utilized scholarships
TypeError: service.getAvailableScholarships is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:444:36
    442| 
    443|     it('should exclude fully utilized scholarships', () => {
    444|       const scholarships = service.getAvailableScholarships()
       |                                    ^
    445| 
    446|       scholarships.forEach(s => {

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[87/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > revokeScholarship > should revoke scholarship allocation
 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > revokeScholarship > should restore scholarship available amount
 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > revokeScholarship > should require revocation reason
 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > revokeScholarship > should prevent revoking already revoked allocation
 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > revokeScholarship > should log audit trail
TypeError: service.allocateScholarship is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:456:30
    454| 
    455|     beforeEach(() => {
    456|       const result = service.allocateScholarship({
       |                              ^
    457|         studentId: 1,
    458|         scholarshipId: 1,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[88/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > edge cases > should handle scholarship with zero total amount
AssertionError: expected undefined to be false // Object.is equality

- Expected: 
false

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:543:30
    541|       })
    542| 
    543|       expect(result.success).toBe(false)
       |                              ^
    544|     })
    545| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[89/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > edge cases > should handle multiple allocations to same student
TypeError: service.allocateScholarship is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:547:15
    545| 
    546|     it('should handle multiple allocations to same student', () => {
    547|       service.allocateScholarship({
       |               ^
    548|         studentId: 1,
    549|         scholarshipId: 1,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[90/251]Î“Ã„Â»

 FAIL  electron/main/services/finance/__tests__/ScholarshipService.test.ts > ScholarshipService > edge cases > should handle allocation on scholarship boundary dates
TypeError: service.allocateScholarship is not a function
 Î“Â¥Â» electron/main/services/finance/__tests__/ScholarshipService.test.ts:567:30
    565| 
    566|     it('should handle allocation on scholarship boundary dates', () =>Î“Ã‡Âª
    567|       const result = service.allocateScholarship({
       |                              ^
    568|         studentId: 1,
    569|         scholarshipId: 1,

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[91/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > getAgedReceivables > should categorize receivables by aging buckets
TypeError: service.getAgedReceivables is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:84:30
     82|   describe('getAgedReceivables', () => {
     83|     it('should categorize receivables by aging buckets', () => {
     84|       const result = service.getAgedReceivables('2026-02-02')
       |                              ^
     85| 
     86|       expect(result).toHaveProperty('current')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[92/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > getAgedReceivables > should calculate correct aging amounts
TypeError: service.getAgedReceivables is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:95:30
     93| 
     94|     it('should calculate correct aging amounts', () => {
     95|       const result = service.getAgedReceivables('2026-02-02')
       |                              ^
     96| 
     97|       expect(result.current).toHaveLength(1)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[93/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > getAgedReceivables > should calculate total receivables correctly
TypeError: service.getAgedReceivables is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:113:30
    111| 
    112|     it('should calculate total receivables correctly', () => {
    113|       const result = service.getAgedReceivables('2026-02-02')
       |                              ^
    114| 
    115|       const expectedTotal = 50000 + 40000 + 60000 + 35000 + 80000 + 40Î“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[94/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > getAgedReceivables > should include student details in aging report
TypeError: service.getAgedReceivables is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:120:30
    118| 
    119|     it('should include student details in aging report', () => {
    120|       const result = service.getAgedReceivables('2026-02-02')
       |                              ^
    121| 
    122|       const currentItem = result.current[0]

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[95/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > getAgedReceivables > should calculate days overdue correctly
TypeError: service.getAgedReceivables is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:130:30
    128| 
    129|     it('should calculate days overdue correctly', () => {
    130|       const result = service.getAgedReceivables('2026-02-02')
       |                              ^
    131| 
    132|       result.days31to60.forEach(item => {

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[96/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > getAgedReceivables > should handle partially paid invoices
TypeError: service.getAgedReceivables is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:144:30
    142| 
    143|     it('should handle partially paid invoices', () => {
    144|       const result = service.getAgedReceivables('2026-02-02')
       |                              ^
    145| 
    146|       const partiallyPaid = result.days31to60.find(item => item.invoicÎ“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[97/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > getAgedReceivables > should exclude fully paid invoices
TypeError: service.getAgedReceivables is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:154:30
    152|       db.exec(`UPDATE invoice SET paid_amount = amount, status = 'PAIDÎ“Ã‡Âª
    153| 
    154|       const result = service.getAgedReceivables('2026-02-02')
       |                              ^
    155| 
    156|       const paidInvoice = result.current.find(item => item.invoice_numÎ“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[98/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > determinePriority > should assign HIGH priority to over 90 days
TypeError: service.determinePriority is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:163:34
    161|   describe('determinePriority', () => {
    162|     it('should assign HIGH priority to over 90 days', () => {
    163|       const priorities = service.determinePriority('2026-02-02')
       |                                  ^
    164| 
    165|       const highPriority = priorities.filter(p => p.priority === 'HIGHÎ“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[99/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > determinePriority > should assign MEDIUM priority to 31-90 days
TypeError: service.determinePriority is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:174:34
    172| 
    173|     it('should assign MEDIUM priority to 31-90 days', () => {
    174|       const priorities = service.determinePriority('2026-02-02')
       |                                  ^
    175| 
    176|       const mediumPriority = priorities.filter(p => p.priority === 'MEÎ“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[100/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > determinePriority > should assign LOW priority to current invoices
TypeError: service.determinePriority is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:186:34
    184| 
    185|     it('should assign LOW priority to current invoices', () => {
    186|       const priorities = service.determinePriority('2026-02-02')
       |                                  ^
    187| 
    188|       const lowPriority = priorities.filter(p => p.priority === 'LOW')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[101/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > determinePriority > should include recommended actions
TypeError: service.determinePriority is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:197:34
    195| 
    196|     it('should include recommended actions', () => {
    197|       const priorities = service.determinePriority('2026-02-02')
       |                                  ^
    198| 
    199|       priorities.forEach(item => {

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[102/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > determinePriority > should sort by priority and then by days overdue
TypeError: service.determinePriority is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:206:34
    204| 
    205|     it('should sort by priority and then by days overdue', () => {
    206|       const priorities = service.determinePriority('2026-02-02')
       |                                  ^
    207| 
    208|       // First items should be HIGH priority

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[103/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > generateCollectionReminders > should generate reminders for overdue invoices
TypeError: actual value must be number or bigint, received "undefined"
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:223:32
    221|       const reminders = service.generateCollectionReminders('2026-02-0Î“Ã‡Âª
    222| 
    223|       expect(reminders.length).toBeGreaterThan(0)
       |                                ^
    224|       reminders.forEach(reminder => {
    225|         expect(reminder).toHaveProperty('student_name')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[104/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > generateCollectionReminders > should calculate total overdue per student
TypeError: reminders.find is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:235:42
    233|       const reminders = service.generateCollectionReminders('2026-02-0Î“Ã‡Âª
    234| 
    235|       const student1Reminder = reminders.find(r => r.admission_number Î“Ã‡Âª
       |                                          ^
    236|       expect(student1Reminder).toBeDefined()
    237|       expect(student1Reminder?.total_overdue).toBe(40000) // Only INV-Î“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[105/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > generateCollectionReminders > should personalize messages based on severity
TypeError: reminders.find is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:243:39
    241|       const reminders = service.generateCollectionReminders('2026-02-0Î“Ã‡Âª
    242| 
    243|       const severeOverdue = reminders.find(r => r.oldest_days_overdue Î“Ã‡Âª
       |                                       ^
    244|       expect(severeOverdue?.message).toContain('urgent')
    245| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[106/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > generateCollectionReminders > should not generate reminders for students with no overdue
TypeError: reminders.find is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:260:42
    258|       const reminders = service.generateCollectionReminders('2026-02-0Î“Ã‡Âª
    259| 
    260|       const student1Reminder = reminders.find(r => r.admission_number Î“Ã‡Âª
       |                                          ^
    261|       if (student1Reminder) {
    262|         expect(student1Reminder.total_overdue).toBe(0)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[107/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > analyzeCollectionEffectiveness > should calculate collection metrics
TypeError: service.analyzeCollectionEffectiveness is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:280:32
    278| 
    279|     it('should calculate collection metrics', () => {
    280|       const analysis = service.analyzeCollectionEffectiveness('2026-01Î“Ã‡Âª
       |                                ^
    281| 
    282|       expect(analysis).toHaveProperty('totalBilled')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[108/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > analyzeCollectionEffectiveness > should calculate collection rate correctly
TypeError: service.analyzeCollectionEffectiveness is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:290:32
    288| 
    289|     it('should calculate collection rate correctly', () => {
    290|       const analysis = service.analyzeCollectionEffectiveness('2026-01Î“Ã‡Âª
       |                                ^
    291| 
    292|       expect(analysis.collectionRate).toBeGreaterThanOrEqual(0)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[109/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > analyzeCollectionEffectiveness > should identify collection trends
TypeError: service.analyzeCollectionEffectiveness is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:297:32
    295| 
    296|     it('should identify collection trends', () => {
    297|       const analysis = service.analyzeCollectionEffectiveness('2026-01Î“Ã‡Âª
       |                                ^
    298| 
    299|       expect(analysis).toHaveProperty('trend')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[110/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > analyzeCollectionEffectiveness > should provide recommendations
TypeError: service.analyzeCollectionEffectiveness is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:304:32
    302| 
    303|     it('should provide recommendations', () => {
    304|       const analysis = service.analyzeCollectionEffectiveness('2026-01Î“Ã‡Âª
       |                                ^
    305| 
    306|       expect(analysis).toHaveProperty('recommendations')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[111/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > edge cases > should handle no receivables
TypeError: service.getAgedReceivables is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:315:30
    313|       db.exec(`UPDATE invoice SET paid_amount = amount, status = 'PAIDÎ“Ã‡Âª
    314| 
    315|       const result = service.getAgedReceivables('2026-02-02')
       |                              ^
    316| 
    317|       expect(result.total).toBe(0)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[112/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > edge cases > should handle future date correctly
TypeError: service.getAgedReceivables is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:322:30
    320| 
    321|     it('should handle future date correctly', () => {
    322|       const result = service.getAgedReceivables('2027-01-01')
       |                              ^
    323| 
    324|       // All invoices should be overdue by now

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[113/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/AgedReceivablesService.test.ts > AgedReceivablesService > edge cases > should handle negative balances gracefully
TypeError: service.getAgedReceivables is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:333:30
    331|       db.exec(`UPDATE invoice SET paid_amount = amount + 10000 WHERE iÎ“Ã‡Âª
    332| 
    333|       const result = service.getAgedReceivables('2026-02-02')
       |                              ^
    334| 
    335|       // Overpaid invoice should not appear or should have 0 balance

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[114/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > getCashFlowStatement > should generate complete cash flow statement
TypeError: service.getCashFlowStatement is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:87:30
     85|   describe('getCashFlowStatement', () => {
     86|     it('should generate complete cash flow statement', () => {
     87|       const result = service.getCashFlowStatement('2026-01-01', '2026-Î“Ã‡Âª
       |                              ^
     88| 
     89|       expect(result).toHaveProperty('operatingActivities')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[115/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > getCashFlowStatement > should calculate operating activities correctly
TypeError: service.getCashFlowStatement is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:98:30
     96| 
     97|     it('should calculate operating activities correctly', () => {
     98|       const result = service.getCashFlowStatement('2026-01-01', '2026-Î“Ã‡Âª
       |                              ^
     99| 
    100|       expect(result.operatingActivities.cashFromFees).toBe(155000) // Î“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[116/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > getCashFlowStatement > should calculate investing activities correctly
TypeError: service.getCashFlowStatement is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:110:30
    108| 
    109|     it('should calculate investing activities correctly', () => {
    110|       const result = service.getCashFlowStatement('2026-01-01', '2026-Î“Ã‡Âª
       |                              ^
    111| 
    112|       expect(result.investingActivities.assetPurchases).toBe(125000) /Î“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[117/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > getCashFlowStatement > should calculate financing activities correctly
TypeError: service.getCashFlowStatement is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:117:30
    115| 
    116|     it('should calculate financing activities correctly', () => {
    117|       const result = service.getCashFlowStatement('2026-01-01', '2026-Î“Ã‡Âª
       |                              ^
    118| 
    119|       expect(result.financingActivities.loansReceived).toBe(500000)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[118/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > getCashFlowStatement > should calculate net cash flow correctly
TypeError: service.getCashFlowStatement is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:125:30
    123| 
    124|     it('should calculate net cash flow correctly', () => {
    125|       const result = service.getCashFlowStatement('2026-01-01', '2026-Î“Ã‡Âª
       |                              ^
    126| 
    127|       const expectedNetCashFlow = 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[119/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > getCashFlowStatement > should handle empty date range
TypeError: service.getCashFlowStatement is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:136:30
    134| 
    135|     it('should handle empty date range', () => {
    136|       const result = service.getCashFlowStatement('2025-01-01', '2025-Î“Ã‡Âª
       |                              ^
    137| 
    138|       expect(result.operatingActivities.cashFromFees).toBe(0)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[120/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > getCashFlowStatement > should filter by date range correctly
TypeError: service.getCashFlowStatement is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:145:30
    143| 
    144|     it('should filter by date range correctly', () => {
    145|       const result = service.getCashFlowStatement('2026-01-15', '2026-Î“Ã‡Âª
       |                              ^
    146| 
    147|       // Should only include transactions within range

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[121/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > analyzeLiquidity > should assess liquidity position
TypeError: service.analyzeLiquidity is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:155:30
    153|   describe('analyzeLiquidity', () => {
    154|     it('should assess liquidity position', () => {
    155|       const result = service.analyzeLiquidity('2026-01-01', '2026-01-3Î“Ã‡Âª
       |                              ^
    156| 
    157|       expect(result).toHaveProperty('liquidityRatio')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[122/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > analyzeLiquidity > should identify healthy liquidity
TypeError: service.analyzeLiquidity is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:172:30
    170|       `)
    171| 
    172|       const result = service.analyzeLiquidity('2026-01-01', '2026-01-3Î“Ã‡Âª
       |                              ^
    173| 
    174|       expect(result.liquidityStatus).toBe('HEALTHY')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[123/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > analyzeLiquidity > should identify critical liquidity issues
TypeError: service.analyzeLiquidity is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:186:30
    184|       `)
    185| 
    186|       const result = service.analyzeLiquidity('2026-01-01', '2026-01-3Î“Ã‡Âª
       |                              ^
    187| 
    188|       expect(result.liquidityStatus).toBe('CRITICAL')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[124/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > analyzeLiquidity > should calculate days of cash cover
TypeError: service.analyzeLiquidity is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:193:30
    191| 
    192|     it('should calculate days of cash cover', () => {
    193|       const result = service.analyzeLiquidity('2026-01-01', '2026-01-3Î“Ã‡Âª
       |                              ^
    194| 
    195|       expect(result.daysOfCashCover).toBeGreaterThan(0)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[125/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > forecastCashFlow > should generate cash flow forecast
TypeError: service.forecastCashFlow is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:202:30
    200|   describe('forecastCashFlow', () => {
    201|     it('should generate cash flow forecast', () => {
    202|       const result = service.forecastCashFlow(3) // 3 months
       |                              ^
    203| 
    204|       expect(result).toHaveLength(3)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[126/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > forecastCashFlow > should base projections on historical data
TypeError: service.forecastCashFlow is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:215:32
    213| 
    214|     it('should base projections on historical data', () => {
    215|       const forecast = service.forecastCashFlow(1)
       |                                ^
    216| 
    217|       expect(forecast[0].projectedInflows).toBeGreaterThan(0)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[127/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > forecastCashFlow > should calculate confidence levels
TypeError: service.forecastCashFlow is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:222:32
    220| 
    221|     it('should calculate confidence levels', () => {
    222|       const forecast = service.forecastCashFlow(3)
       |                                ^
    223| 
    224|       forecast.forEach(month => {

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[128/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > forecastCashFlow > should handle custom periods
TypeError: service.forecastCashFlow is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:236:39
    234| 
    235|     it('should handle custom periods', () => {
    236|       const forecast6Months = service.forecastCashFlow(6)
       |                                       ^
    237|       expect(forecast6Months).toHaveLength(6)
    238|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[129/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > edge cases > should handle voided payments
TypeError: service.getCashFlowStatement is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:245:30
    243|       db.exec(`UPDATE payment SET status = 'VOIDED' WHERE id = 1`)
    244| 
    245|       const result = service.getCashFlowStatement('2026-01-01', '2026-Î“Ã‡Âª
       |                              ^
    246| 
    247|       // Voided payment should not be included

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[130/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > edge cases > should handle negative balances
TypeError: service.getCashFlowStatement is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:258:30
    256|       `)
    257| 
    258|       const result = service.getCashFlowStatement('2026-01-01', '2026-Î“Ã‡Âª
       |                              ^
    259| 
    260|       expect(result.netCashFlow).toBeLessThan(0)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[131/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/CashFlowStatementService.test.ts > CashFlowStatementService > edge cases > should handle invalid date ranges
TypeError: service.getCashFlowStatement is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/CashFlowStatementService.test.ts:265:30
    263| 
    264|     it('should handle invalid date ranges', () => {
    265|       const result = service.getCashFlowStatement('2026-02-01', '2026-Î“Ã‡Âª
       |                              ^
    266| 
    267|       expect(result.netCashFlow).toBe(0)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[132/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > exportStudentData > should export student data in CSV format
TypeError: service.exportStudentData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:96:30
     94|   describe('exportStudentData', () => {
     95|     it('should export student data in CSV format', () => {
     96|       const result = service.exportStudentData({
       |                              ^
     97|         format: 'CSV',
     98|         userId: 10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[133/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > exportStudentData > should export student data in JSON format
TypeError: service.exportStudentData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:108:30
    106| 
    107|     it('should export student data in JSON format', () => {
    108|       const result = service.exportStudentData({
       |                              ^
    109|         format: 'JSON',
    110|         userId: 10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[134/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > exportStudentData > should include all NEMIS-required fields
TypeError: service.exportStudentData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:123:30
    121| 
    122|     it('should include all NEMIS-required fields', () => {
    123|       const result = service.exportStudentData({
       |                              ^
    124|         format: 'JSON',
    125|         userId: 10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[135/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > exportStudentData > should filter by grade
TypeError: service.exportStudentData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:141:30
    139| 
    140|     it('should filter by grade', () => {
    141|       const result = service.exportStudentData({
       |                              ^
    142|         format: 'JSON',
    143|         filters: { grade: 'Grade 8' },

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[136/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > exportStudentData > should filter by gender
TypeError: service.exportStudentData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:153:30
    151| 
    152|     it('should filter by gender', () => {
    153|       const result = service.exportStudentData({
       |                              ^
    154|         format: 'JSON',
    155|         filters: { gender: 'F' },

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[137/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > exportStudentData > should filter by date range
TypeError: service.exportStudentData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:165:30
    163| 
    164|     it('should filter by date range', () => {
    165|       const result = service.exportStudentData({
       |                              ^
    166|         format: 'JSON',
    167|         filters: {

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[138/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > exportStudentData > should handle empty result set
TypeError: service.exportStudentData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:179:30
    177| 
    178|     it('should handle empty result set', () => {
    179|       const result = service.exportStudentData({
       |                              ^
    180|         format: 'CSV',
    181|         filters: { grade: 'Grade 12' }, // Non-existent grade

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[139/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > exportStudentData > should create export record
TypeError: service.exportStudentData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:190:30
    188| 
    189|     it('should create export record', () => {
    190|       const result = service.exportStudentData({
       |                              ^
    191|         format: 'CSV',
    192|         userId: 10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[140/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > exportStudentData > should log audit trail
TypeError: service.exportStudentData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:203:15
    201| 
    202|     it('should log audit trail', () => {
    203|       service.exportStudentData({
       |               ^
    204|         format: 'CSV',
    205|         userId: 10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[141/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > exportStaffData > should export staff data in CSV format
TypeError: service.exportStaffData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:216:30
    214|   describe('exportStaffData', () => {
    215|     it('should export staff data in CSV format', () => {
    216|       const result = service.exportStaffData({
       |                              ^
    217|         format: 'CSV',
    218|         userId: 10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[142/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > exportStaffData > should include TSC numbers
TypeError: service.exportStaffData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:226:30
    224| 
    225|     it('should include TSC numbers', () => {
    226|       const result = service.exportStaffData({
       |                              ^
    227|         format: 'JSON',
    228|         userId: 10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[143/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > exportStaffData > should filter by position
TypeError: service.exportStaffData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:238:30
    236| 
    237|     it('should filter by position', () => {
    238|       const result = service.exportStaffData({
       |                              ^
    239|         format: 'JSON',
    240|         filters: { position: 'Mathematics Teacher' },

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[144/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > exportFinancialData > should export financial summary
TypeError: service.exportFinancialData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:252:30
    250|   describe('exportFinancialData', () => {
    251|     it('should export financial summary', () => {
    252|       const result = service.exportFinancialData({
       |                              ^
    253|         format: 'JSON',
    254|         startDate: '2020-01-01',

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[145/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > exportFinancialData > should include revenue and collection metrics
TypeError: service.exportFinancialData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:264:30
    262| 
    263|     it('should include revenue and collection metrics', () => {
    264|       const result = service.exportFinancialData({
       |                              ^
    265|         format: 'JSON',
    266|         startDate: '2020-01-01',

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[146/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > exportFinancialData > should calculate collection rate correctly
TypeError: service.exportFinancialData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:278:30
    276| 
    277|     it('should calculate collection rate correctly', () => {
    278|       const result = service.exportFinancialData({
       |                              ^
    279|         format: 'JSON',
    280|         startDate: '2020-01-01',

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[147/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > exportFinancialData > should aggregate by student
TypeError: service.exportFinancialData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:297:30
    295| 
    296|     it('should aggregate by student', () => {
    297|       const result = service.exportFinancialData({
       |                              ^
    298|         format: 'JSON',
    299|         startDate: '2020-01-01',

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[148/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > validateExportData > should validate student data completeness
TypeError: service.validateExportData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:313:34
    311|   describe('validateExportData', () => {
    312|     it('should validate student data completeness', () => {
    313|       const validation = service.validateExportData('STUDENT')
       |                                  ^
    314| 
    315|       expect(validation).toHaveProperty('isValid')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[149/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > validateExportData > should identify missing NEMIS UPI
TypeError: service.validateExportData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:321:34
    319| 
    320|     it('should identify missing NEMIS UPI', () => {
    321|       const validation = service.validateExportData('STUDENT')
       |                                  ^
    322| 
    323|       expect(validation.warnings.length).toBeGreaterThan(0)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[150/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > validateExportData > should identify missing birth dates
TypeError: service.validateExportData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:331:34
    329|       db.exec(`UPDATE student SET birth_date = NULL WHERE id = 1`)
    330| 
    331|       const validation = service.validateExportData('STUDENT')
       |                                  ^
    332| 
    333|       const birthDateError = validation.errors.find(e => e.includes('bÎ“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[151/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > validateExportData > should validate staff data
TypeError: service.validateExportData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:338:34
    336| 
    337|     it('should validate staff data', () => {
    338|       const validation = service.validateExportData('STAFF')
       |                                  ^
    339| 
    340|       expect(validation.isValid).toBe(true)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[152/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > validateExportData > should identify missing TSC numbers
TypeError: service.validateExportData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:346:34
    344|       db.exec(`UPDATE staff SET tsc_number = NULL WHERE id = 1`)
    345| 
    346|       const validation = service.validateExportData('STAFF')
       |                                  ^
    347| 
    348|       const tscWarning = validation.warnings.find(w => w.includes('TSCÎ“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[153/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > getExportHistory > should return export history
 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > getExportHistory > should filter by export type
 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > getExportHistory > should filter by date range
 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > getExportHistory > should order by most recent first
TypeError: service.exportStudentData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:355:15
    353|   describe('getExportHistory', () => {
    354|     beforeEach(() => {
    355|       service.exportStudentData({ format: 'CSV', userId: 10 })
       |               ^
    356|       service.exportStaffData({ format: 'JSON', userId: 10 })
    357|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[154/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > formatCSV > should format data as CSV with headers
TypeError: service.formatCSV is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:403:27
    401|       ]
    402| 
    403|       const csv = service.formatCSV(data)
       |                           ^
    404| 
    405|       expect(csv).toContain('name,age,grade')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[155/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > formatCSV > should escape commas in values
TypeError: service.formatCSV is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:415:27
    413|       ]
    414| 
    415|       const csv = service.formatCSV(data)
       |                           ^
    416| 
    417|       expect(csv).toContain('"Doe, John"')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[156/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > formatCSV > should handle empty array
TypeError: service.formatCSV is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:421:27
    419| 
    420|     it('should handle empty array', () => {
    421|       const csv = service.formatCSV([])
       |                           ^
    422| 
    423|       expect(csv).toBe('')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[157/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > formatCSV > should handle null values
TypeError: service.formatCSV is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:431:27
    429|       ]
    430| 
    431|       const csv = service.formatCSV(data)
       |                           ^
    432| 
    433|       expect(csv).toContain('John,')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[158/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > formatJSON > should format data as pretty JSON
TypeError: service.formatJSON is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:443:28
    441|       ]
    442| 
    443|       const json = service.formatJSON(data)
       |                            ^
    444| 
    445|       expect(() => JSON.parse(json)).not.toThrow()

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[159/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > formatJSON > should handle empty array
TypeError: service.formatJSON is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:451:28
    449| 
    450|     it('should handle empty array', () => {
    451|       const json = service.formatJSON([])
       |                            ^
    452| 
    453|       expect(json).toBe('[]')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[160/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > edge cases > should handle special characters in data
SqliteError: no such column: "O'Connor" - should this be a string literal in single-quotes?
 Î“Â¥Â» Database.exec node_modules/better-sqlite3-multiple-ciphers/lib/methods/wrappers.js:19:14
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:459:10
    457|   describe('edge cases', () => {
    458|     it('should handle special characters in data', () => {
    459|       db.exec(`INSERT INTO student (first_name, last_name, admission_nÎ“Ã‡Âª
       |          ^
    460|                VALUES ('Mary-Jane', "O'Connor", 'STU-004', 'F', 'GradeÎ“Ã‡Âª
    461| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[161/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > edge cases > should handle unicode characters
TypeError: service.exportStudentData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:472:30
    470|                VALUES ('Josâ”œâŒ', 'Mâ”œâ•ller', 'STU-005', 'M', 'Grade 7')`)
    471| 
    472|       const result = service.exportStudentData({ format: 'JSON', userIÎ“Ã‡Âª
       |                              ^
    473| 
    474|       expect(result.success).toBe(true)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[162/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > edge cases > should handle large datasets
TypeError: service.exportStudentData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:491:30
    489|       }
    490| 
    491|       const result = service.exportStudentData({ format: 'CSV', userIdÎ“Ã‡Âª
       |                              ^
    492| 
    493|       expect(result.success).toBe(true)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[163/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/NEMISExportService.test.ts > NEMISExportService > edge cases > should handle invalid date formats
TypeError: service.exportStudentData is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/NEMISExportService.test.ts:501:30
    499|                VALUES ('Test', 'Student', 'STU-006', 'invalid-date', 'Î“Ã‡Âª
    500| 
    501|       const result = service.exportStudentData({ format: 'JSON', userIÎ“Ã‡Âª
       |                              ^
    502| 
    503|       // Should still export, may flag in validation

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[164/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeTransportProfitability > should calculate transport segment metrics
TypeError: service.analyzeTransportProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:93:30
     91|   describe('analyzeTransportProfitability', () => {
     92|     it('should calculate transport segment metrics', () => {
     93|       const result = service.analyzeTransportProfitability('2026-01-01Î“Ã‡Âª
       |                              ^
     94| 
     95|       expect(result).toHaveProperty('revenue')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[165/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeTransportProfitability > should calculate transport revenue correctly
TypeError: service.analyzeTransportProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:103:30
    101| 
    102|     it('should calculate transport revenue correctly', () => {
    103|       const result = service.analyzeTransportProfitability('2026-01-01Î“Ã‡Âª
       |                              ^
    104| 
    105|       // 2 students * 15000 = 30000

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[166/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeTransportProfitability > should calculate transport expenses correctly
TypeError: service.analyzeTransportProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:110:30
    108| 
    109|     it('should calculate transport expenses correctly', () => {
    110|       const result = service.analyzeTransportProfitability('2026-01-01Î“Ã‡Âª
       |                              ^
    111| 
    112|       // Fuel 8000 + Maintenance 4000 = 12000

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[167/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeTransportProfitability > should calculate net profit correctly
TypeError: service.analyzeTransportProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:117:30
    115| 
    116|     it('should calculate net profit correctly', () => {
    117|       const result = service.analyzeTransportProfitability('2026-01-01Î“Ã‡Âª
       |                              ^
    118| 
    119|       // Revenue 30000 - Expenses 12000 = 18000

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[168/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeTransportProfitability > should calculate profit margin percentage
TypeError: service.analyzeTransportProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:124:30
    122| 
    123|     it('should calculate profit margin percentage', () => {
    124|       const result = service.analyzeTransportProfitability('2026-01-01Î“Ã‡Âª
       |                              ^
    125| 
    126|       // (18000 / 30000) * 100 = 60%

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[169/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeTransportProfitability > should count students served correctly
TypeError: service.analyzeTransportProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:131:30
    129| 
    130|     it('should count students served correctly', () => {
    131|       const result = service.analyzeTransportProfitability('2026-01-01Î“Ã‡Âª
       |                              ^
    132| 
    133|       expect(result.studentsServed).toBe(2)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[170/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeTransportProfitability > should calculate per-student metrics
TypeError: service.analyzeTransportProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:137:30
    135| 
    136|     it('should calculate per-student metrics', () => {
    137|       const result = service.analyzeTransportProfitability('2026-01-01Î“Ã‡Âª
       |                              ^
    138| 
    139|       expect(result).toHaveProperty('revenuePerStudent')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[171/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeBoardingProfitability > should calculate boarding segment metrics
TypeError: service.analyzeBoardingProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:149:30
    147|   describe('analyzeBoardingProfitability', () => {
    148|     it('should calculate boarding segment metrics', () => {
    149|       const result = service.analyzeBoardingProfitability('2026-01-01'Î“Ã‡Âª
       |                              ^
    150| 
    151|       expect(result).toHaveProperty('revenue')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[172/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeBoardingProfitability > should calculate boarding revenue correctly
TypeError: service.analyzeBoardingProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:159:30
    157| 
    158|     it('should calculate boarding revenue correctly', () => {
    159|       const result = service.analyzeBoardingProfitability('2026-01-01'Î“Ã‡Âª
       |                              ^
    160| 
    161|       // 2 students * 40000 = 80000

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[173/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeBoardingProfitability > should calculate boarding expenses correctly
TypeError: service.analyzeBoardingProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:166:30
    164| 
    165|     it('should calculate boarding expenses correctly', () => {
    166|       const result = service.analyzeBoardingProfitability('2026-01-01'Î“Ã‡Âª
       |                              ^
    167| 
    168|       // Food 50000 + Utilities 15000 = 65000

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[174/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeBoardingProfitability > should calculate net profit correctly
TypeError: service.analyzeBoardingProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:173:30
    171| 
    172|     it('should calculate net profit correctly', () => {
    173|       const result = service.analyzeBoardingProfitability('2026-01-01'Î“Ã‡Âª
       |                              ^
    174| 
    175|       // Revenue 80000 - Expenses 65000 = 15000

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[175/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeBoardingProfitability > should identify low margins
TypeError: service.analyzeBoardingProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:180:30
    178| 
    179|     it('should identify low margins', () => {
    180|       const result = service.analyzeBoardingProfitability('2026-01-01'Î“Ã‡Âª
       |                              ^
    181| 
    182|       // (15000 / 80000) * 100 = 18.75%

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[176/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeBoardingProfitability > should count students served correctly
TypeError: service.analyzeBoardingProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:188:30
    186| 
    187|     it('should count students served correctly', () => {
    188|       const result = service.analyzeBoardingProfitability('2026-01-01'Î“Ã‡Âª
       |                              ^
    189| 
    190|       expect(result.studentsServed).toBe(2)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[177/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeActivityFees > should calculate activity fee metrics
AssertionError: expected Promise{Î“Ã‡Âª} to have property "totalRevenue"
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:198:22
    196|       const result = service.analyzeActivityFees('2026-01-01', '2026-0Î“Ã‡Âª
    197| 
    198|       expect(result).toHaveProperty('totalRevenue')
       |                      ^
    199|       expect(result).toHaveProperty('totalExpenses')
    200|       expect(result).toHaveProperty('netProfit')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[178/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeActivityFees > should calculate total activity revenue
AssertionError: expected undefined to be 26000 // Object.is equality

- Expected: 
26000

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:208:35
    206| 
    207|       // 5000 + 8000 + 6000 + 7000 = 26000
    208|       expect(result.totalRevenue).toBe(26000)
       |                                   ^
    209|     })
    210| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[179/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeActivityFees > should break down by activity
AssertionError: Target cannot be null or undefined.
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:214:33
    212|       const result = service.analyzeActivityFees('2026-01-01', '2026-0Î“Ã‡Âª
    213| 
    214|       expect(result.activities).toHaveLength(4)
       |                                 ^
    215|       
    216|       const musicClub = result.activities.find(a => a.name === 'Music Î“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[180/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeActivityFees > should identify most profitable activities
TypeError: result.activities is not iterable
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:224:42
    222|       const result = service.analyzeActivityFees('2026-01-01', '2026-0Î“Ã‡Âª
    223| 
    224|       const sortedByRevenue = [...result.activities].sort((a, b) => b.Î“Ã‡Âª
       |                                          ^
    225|       expect(sortedByRevenue[0].name).toBe('Sports Team')
    226|       expect(sortedByRevenue[0].revenue).toBe(8000)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[181/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > analyzeActivityFees > should calculate net profit after expenses
AssertionError: expected undefined to be 16000 // Object.is equality

- Expected: 
16000

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:233:32
    231| 
    232|       // Revenue 26000 - Expenses 10000 = 16000
    233|       expect(result.netProfit).toBe(16000)
       |                                ^
    234|     })
    235|   })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[182/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > generateOverallProfitability > should provide comprehensive profitability analysis
TypeError: service.generateOverallProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:239:30
    237|   describe('generateOverallProfitability', () => {
    238|     it('should provide comprehensive profitability analysis', () => {
    239|       const result = service.generateOverallProfitability('2026-01-01'Î“Ã‡Âª
       |                              ^
    240| 
    241|       expect(result).toHaveProperty('transport')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[183/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > generateOverallProfitability > should calculate total revenue across segments
TypeError: service.generateOverallProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:251:30
    249| 
    250|     it('should calculate total revenue across segments', () => {
    251|       const result = service.generateOverallProfitability('2026-01-01'Î“Ã‡Âª
       |                              ^
    252| 
    253|       // Transport 30000 + Boarding 80000 + Activities 26000 = 136000

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[184/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > generateOverallProfitability > should calculate total expenses across segments
TypeError: service.generateOverallProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:258:30
    256| 
    257|     it('should calculate total expenses across segments', () => {
    258|       const result = service.generateOverallProfitability('2026-01-01'Î“Ã‡Âª
       |                              ^
    259| 
    260|       // Transport 12000 + Boarding 65000 + Activities 10000 = 87000

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[185/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > generateOverallProfitability > should calculate overall net profit
TypeError: service.generateOverallProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:265:30
    263| 
    264|     it('should calculate overall net profit', () => {
    265|       const result = service.generateOverallProfitability('2026-01-01'Î“Ã‡Âª
       |                              ^
    266| 
    267|       // Revenue 136000 - Expenses 87000 = 49000

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[186/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > generateOverallProfitability > should calculate overall profit margin
TypeError: service.generateOverallProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:272:30
    270| 
    271|     it('should calculate overall profit margin', () => {
    272|       const result = service.generateOverallProfitability('2026-01-01'Î“Ã‡Âª
       |                              ^
    273| 
    274|       // (49000 / 136000) * 100 = 36.03%

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[187/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > generateOverallProfitability > should identify most and least profitable segments
TypeError: service.generateOverallProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:279:30
    277| 
    278|     it('should identify most and least profitable segments', () => {
    279|       const result = service.generateOverallProfitability('2026-01-01'Î“Ã‡Âª
       |                              ^
    280| 
    281|       expect(result).toHaveProperty('mostProfitableSegment')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[188/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > generateOverallProfitability > should provide strategic recommendations
TypeError: service.generateOverallProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:292:30
    290| 
    291|     it('should provide strategic recommendations', () => {
    292|       const result = service.generateOverallProfitability('2026-01-01'Î“Ã‡Âª
       |                              ^
    293| 
    294|       expect(result).toHaveProperty('recommendations')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[189/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > compareSegments > should provide comparative segment analysis
TypeError: service.compareSegments is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:302:30
    300|   describe('compareSegments', () => {
    301|     it('should provide comparative segment analysis', () => {
    302|       const result = service.compareSegments('2026-01-01', '2026-01-31Î“Ã‡Âª
       |                              ^
    303| 
    304|       expect(result).toHaveProperty('segments')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[190/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > compareSegments > should rank segments by profitability
TypeError: service.compareSegments is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:309:30
    307| 
    308|     it('should rank segments by profitability', () => {
    309|       const result = service.compareSegments('2026-01-01', '2026-01-31Î“Ã‡Âª
       |                              ^
    310| 
    311|       const sorted = [...result.segments].sort((a, b) => b.profitMargiÎ“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[191/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > compareSegments > should show segment contribution to total revenue
TypeError: service.compareSegments is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:317:30
    315| 
    316|     it('should show segment contribution to total revenue', () => {
    317|       const result = service.compareSegments('2026-01-01', '2026-01-31Î“Ã‡Âª
       |                              ^
    318| 
    319|       const totalRevenue = result.segments.reduce((sum, s) => sum + s.Î“Ã‡Âª

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[192/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > edge cases > should handle segment with no revenue
TypeError: service.analyzeTransportProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:334:30
    332|       db.exec(`DELETE FROM invoice WHERE item_type = 'TRANSPORT'`)
    333| 
    334|       const result = service.analyzeTransportProfitability('2026-01-01Î“Ã‡Âª
       |                              ^
    335| 
    336|       expect(result.revenue).toBe(0)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[193/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > edge cases > should handle segment with no expenses
AssertionError: expected undefined to be +0 // Object.is equality

- Expected: 
0

+ Received: 
undefined

 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:345:36
    343|       const result = service.analyzeActivityFees('2026-01-01', '2026-0Î“Ã‡Âª
    344| 
    345|       expect(result.totalExpenses).toBe(0)
       |                                    ^
    346|       expect(result.netProfit).toBe(result.totalRevenue)
    347|       expect(result.profitMargin).toBe(100)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[194/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > edge cases > should handle empty date range
TypeError: service.generateOverallProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:351:30
    349| 
    350|     it('should handle empty date range', () => {
    351|       const result = service.generateOverallProfitability('2025-01-01'Î“Ã‡Âª
       |                              ^
    352| 
    353|       expect(result.totalRevenue).toBe(0)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[195/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts > SegmentProfitabilityService > edge cases > should handle invalid date range
TypeError: service.generateOverallProfitability is not a function
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:359:30
    357| 
    358|     it('should handle invalid date range', () => {
    359|       const result = service.generateOverallProfitability('2026-02-01'Î“Ã‡Âª
       |                              ^
    360| 
    361|       expect(result.totalRevenue).toBe(0)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[196/251]Î“Ã„Â»

 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > generateLedger > should generate complete ledger with opening balance
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > generateLedger > should calculate opening balance correctly
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > generateLedger > should include all transactions in period
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > generateLedger > should order transactions chronologically
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > generateLedger > should calculate running balance correctly
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > generateLedger > should calculate closing balance correctly
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > generateLedger > should provide summary statistics
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > generateLedger > should exclude voided transactions
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > generateLedger > should handle empty period
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > reconcileLedger > should validate ledger integrity
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > reconcileLedger > should identify balanced ledger
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > reconcileLedger > should detect invoice allocation discrepancies
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > reconcileLedger > should provide reconciliation recommendations
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > calculateOpeningBalance > should calculate opening balance for specific date
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > calculateOpeningBalance > should return 0 for student with no prior transactions
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > calculateOpeningBalance > should handle mid-period opening balance
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > calculateOpeningBalance > should exclude voided transactions from opening balance
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > validateLedger > should validate mathematical accuracy
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > validateLedger > should pass validation for correct ledger
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > validateLedger > should detect negative running balances
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > validateLedger > should detect missing transaction references
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > edge cases > should handle student with no transactions
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > edge cases > should handle date range before any transactions
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > edge cases > should handle invalid student ID
 FAIL  electron/main/services/reports/__tests__/StudentLedgerService.test.ts > StudentLedgerService > edge cases > should handle invalid date range
Error: Database not initialized
 Î“Â¥Â» getDatabase electron/main/database/index.ts:10:20
      8| 
      9| export function getDatabase(): Database.Database {
     10|     if (!db) throw new Error('Database not initialized')
       |                    ^
     11|     return db
     12| }
 Î“Â¥Â» new OpeningBalanceCalculator electron/main/services/reports/StudentLedgerService.ts:135:21
 Î“Â¥Â» new LedgerGenerator electron/main/services/reports/StudentLedgerService.ts:172:25
 Î“Â¥Â» new StudentLedgerService electron/main/services/reports/StudentLedgerService.ts:334:28
 Î“Â¥Â» electron/main/services/reports/__tests__/StudentLedgerService.test.ts:114:15

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[197/251]Î“Ã„Â»

 FAIL  electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts > ApprovalWorkflowService > createApprovalRequest > should create level 1 approval for amount under 50,000
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 Î“Â¥Â» electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts:89:30
     87|       })
     88| 
     89|       expect(result.success).toBe(true)
       |                              ^
     90|       expect(result.requestId).toBeGreaterThan(0)
     91|       expect(result.requiredLevel).toBe(1)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[198/251]Î“Ã„Â»

 FAIL  electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts > ApprovalWorkflowService > createApprovalRequest > should create level 2 approval for amount over 50,000
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 Î“Â¥Â» electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts:117:30
    115|       })
    116| 
    117|       expect(result.success).toBe(true)
       |                              ^
    118|       expect(result.requiredLevel).toBe(2)
    119|       expect(result.message).toContain('Level 2')

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[199/251]Î“Ã„Â»

 FAIL  electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts > ApprovalWorkflowService > createApprovalRequest > should log audit trail on creation
AssertionError: expected 0 to be greater than 0
 Î“Â¥Â» electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts:153:32
    151| 
    152|       const auditLogs = db.prepare('SELECT * FROM audit_log WHERE actiÎ“Ã‡Âª
    153|       expect(auditLogs.length).toBeGreaterThan(0)
       |                                ^
    154|       expect(auditLogs[0].user_id).toBe(5)
    155|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[200/251]Î“Ã„Â»

 FAIL  electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts > ApprovalWorkflowService > processApproval > should approve level 1 and advance to level 2
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 Î“Â¥Â» electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts:183:30
    181|       })
    182| 
    183|       expect(result.success).toBe(true)
       |                              ^
    184|       expect(result.message).toContain('advanced to Level 2')
    185| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[201/251]Î“Ã„Â»

 FAIL  electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts > ApprovalWorkflowService > processApproval > should reject level 1 and mark request as rejected
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 Î“Â¥Â» electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts:206:30
    204|       })
    205| 
    206|       expect(result.success).toBe(true)
       |                              ^
    207|       expect(result.message).toContain('rejected')
    208| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[202/251]Î“Ã„Â»

 FAIL  electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts > ApprovalWorkflowService > processApproval > should fully approve when level 2 approves
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 Î“Â¥Â» electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts:235:30
    233|       })
    234| 
    235|       expect(result.success).toBe(true)
       |                              ^
    236|       expect(result.message).toContain('fully approved')
    237| 

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[203/251]Î“Ã„Â»

 FAIL  electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts > ApprovalWorkflowService > processApproval > should prevent approval of wrong level
AssertionError: expected 'Approval request not found: undefined' to contain 'not at the current approval level'

Expected: "not at the current approval level"
Received: "Approval request not found: undefined"

 Î“Â¥Â» electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts:255:30
    253| 
    254|       expect(result.success).toBe(false)
    255|       expect(result.message).toContain('not at the current approval leÎ“Ã‡Âª
       |                              ^
    256|     })
    257|   })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[204/251]Î“Ã„Â»

 FAIL  electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts > ApprovalWorkflowService > getApprovalQueue > should return only level 2 pending after level 1 approval
AssertionError: expected +0 to be 1 // Object.is equality

- Expected
+ Received

- 1
+ 0

 Î“Â¥Â» electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts:317:34
    315| 
    316|       const level2Queue = service.getApprovalQueue(2)
    317|       expect(level2Queue.length).toBe(1)
       |                                  ^
    318|       expect(level2Queue[0].current_level).toBe(2)
    319|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[205/251]Î“Ã„Â»

 FAIL  electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts > ApprovalWorkflowService > getApprovalHistory > should return complete approval history
AssertionError: expected undefined to be defined
 Î“Â¥Â» electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts:359:31
    357|       const history = service.getApprovalHistory(result.requestId!)
    358| 
    359|       expect(history.request).toBeDefined()
       |                               ^
    360|       expect(history.request.id).toBe(result.requestId)
    361|       expect(history.levels).toHaveLength(2)

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[206/251]Î“Ã„Â»

 FAIL  electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts > ApprovalWorkflowService > edge cases > should handle zero amount gracefully
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 Î“Â¥Â» electron/main/services/workflow/__tests__/ApprovalWorkflowService.test.ts:378:30
    376|       })
    377| 
    378|       expect(result.success).toBe(true)
       |                              ^
    379|       expect(result.requiredLevel).toBe(1)
    380|     })

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[207/251]Î“Ã„Â»

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Errors Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

Vitest caught 21 unhandled errors during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Error: Failed to record payment: Failed to validate payment: no such table: fee_invoice
 Î“Â¥Â» PaymentService.recordPayment electron/main/services/finance/PaymentService.ts:462:13
    460|       }
    461|     } catch (error) {
    462|       throw new Error(`Failed to record payment: ${(error as Error).meÎ“Ã‡Âª
       |             ^
    463|     }
    464|   }
 Î“Â¥Â» processTicksAndRejections node:internal/process/task_queues:103:5

This error originated in "electron/main/__tests__/integration/workflows.integration.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
SqliteError: no such table: fee_invoice
 Î“Â¥Â» Database.prepare node_modules/better-sqlite3-multiple-ciphers/lib/methods/wrappers.js:5:21
 Î“Â¥Â» AgedReceivablesRepository.getOutstandingInvoices electron/main/services/reports/AgedReceivablesService.ts:57:15
     55|   async getOutstandingInvoices(asOfDate: string): Promise<any[]> {
     56|     const db = this.db
     57|     return db.prepare(`
       |               ^
     58|       SELECT fi.*, s.first_name, s.last_name, s.admission_number,
     59|              JULIANDAY(?) - JULIANDAY(fi.due_date) as days_overdue
 Î“Â¥Â» CollectionReminderGenerator.generateCollectionReminders electron/main/services/reports/AgedReceivablesService.ts:234:38
 Î“Â¥Â» AgedReceivablesService.generateCollectionReminders electron/main/services/reports/AgedReceivablesService.ts:393:35
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:221:33
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:145:11
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:915:26
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1243:20
 Î“Â¥Â» runWithTimeout ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1209:10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { code: 'SQLITE_ERROR' }
This error originated in "electron/main/services/reports/__tests__/AgedReceivablesService.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Error: Failed to record payment: Failed to validate payment: no such table: fee_invoice
 Î“Â¥Â» PaymentService.recordPayment electron/main/services/finance/PaymentService.ts:462:13
    460|       }
    461|     } catch (error) {
    462|       throw new Error(`Failed to record payment: ${(error as Error).meÎ“Ã‡Âª
       |             ^
    463|     }
    464|   }
 Î“Â¥Â» processTicksAndRejections node:internal/process/task_queues:103:5

This error originated in "electron/main/__tests__/integration/workflows.integration.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
SqliteError: no such table: fee_invoice
 Î“Â¥Â» Database.prepare node_modules/better-sqlite3-multiple-ciphers/lib/methods/wrappers.js:5:21
 Î“Â¥Â» AgedReceivablesRepository.getOutstandingInvoices electron/main/services/reports/AgedReceivablesService.ts:57:15
     55|   async getOutstandingInvoices(asOfDate: string): Promise<any[]> {
     56|     const db = this.db
     57|     return db.prepare(`
       |               ^
     58|       SELECT fi.*, s.first_name, s.last_name, s.admission_number,
     59|              JULIANDAY(?) - JULIANDAY(fi.due_date) as days_overdue
 Î“Â¥Â» CollectionReminderGenerator.generateCollectionReminders electron/main/services/reports/AgedReceivablesService.ts:234:38
 Î“Â¥Â» AgedReceivablesService.generateCollectionReminders electron/main/services/reports/AgedReceivablesService.ts:393:35
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:233:33
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:145:11
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:915:26
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1243:20
 Î“Â¥Â» runWithTimeout ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1209:10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { code: 'SQLITE_ERROR' }
This error originated in "electron/main/services/reports/__tests__/AgedReceivablesService.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Error: Failed to create scholarship: table scholarship has no column named description
 Î“Â¥Â» ScholarshipCreator.createScholarship electron/main/services/finance/ScholarshipService.ts:273:13
    271| 
    272|     } catch (error) {
    273|       throw new Error(`Failed to create scholarship: ${(error as ErrorÎ“Ã‡Âª
       |             ^
    274|     }
    275|   }
 Î“Â¥Â» processTicksAndRejections node:internal/process/task_queues:103:5

This error originated in "electron/main/__tests__/integration/workflows.integration.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
SqliteError: no such table: fee_invoice
 Î“Â¥Â» Database.prepare node_modules/better-sqlite3-multiple-ciphers/lib/methods/wrappers.js:5:21
 Î“Â¥Â» AgedReceivablesRepository.getOutstandingInvoices electron/main/services/reports/AgedReceivablesService.ts:57:15
     55|   async getOutstandingInvoices(asOfDate: string): Promise<any[]> {
     56|     const db = this.db
     57|     return db.prepare(`
       |               ^
     58|       SELECT fi.*, s.first_name, s.last_name, s.admission_number,
     59|              JULIANDAY(?) - JULIANDAY(fi.due_date) as days_overdue
 Î“Â¥Â» CollectionReminderGenerator.generateCollectionReminders electron/main/services/reports/AgedReceivablesService.ts:234:38
 Î“Â¥Â» AgedReceivablesService.generateCollectionReminders electron/main/services/reports/AgedReceivablesService.ts:393:35
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:241:33
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:145:11
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:915:26
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1243:20
 Î“Â¥Â» runWithTimeout ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1209:10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { code: 'SQLITE_ERROR' }
This error originated in "electron/main/services/reports/__tests__/AgedReceivablesService.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Error: Failed to create scholarship: table scholarship has no column named description
 Î“Â¥Â» ScholarshipCreator.createScholarship electron/main/services/finance/ScholarshipService.ts:273:13
    271| 
    272|     } catch (error) {
    273|       throw new Error(`Failed to create scholarship: ${(error as ErrorÎ“Ã‡Âª
       |             ^
    274|     }
    275|   }
 Î“Â¥Â» processTicksAndRejections node:internal/process/task_queues:103:5

This error originated in "electron/main/__tests__/integration/workflows.integration.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
SqliteError: no such table: fee_invoice
 Î“Â¥Â» Database.prepare node_modules/better-sqlite3-multiple-ciphers/lib/methods/wrappers.js:5:21
 Î“Â¥Â» AgedReceivablesRepository.getOutstandingInvoices electron/main/services/reports/AgedReceivablesService.ts:57:15
     55|   async getOutstandingInvoices(asOfDate: string): Promise<any[]> {
     56|     const db = this.db
     57|     return db.prepare(`
       |               ^
     58|       SELECT fi.*, s.first_name, s.last_name, s.admission_number,
     59|              JULIANDAY(?) - JULIANDAY(fi.due_date) as days_overdue
 Î“Â¥Â» CollectionReminderGenerator.generateCollectionReminders electron/main/services/reports/AgedReceivablesService.ts:234:38
 Î“Â¥Â» AgedReceivablesService.generateCollectionReminders electron/main/services/reports/AgedReceivablesService.ts:393:35
 Î“Â¥Â» electron/main/services/reports/__tests__/AgedReceivablesService.test.ts:258:33
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:145:11
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:915:26
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1243:20
 Î“Â¥Â» runWithTimeout ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1209:10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { code: 'SQLITE_ERROR' }
This error originated in "electron/main/services/reports/__tests__/AgedReceivablesService.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Error: Failed to create scholarship: NOT NULL constraint failed: scholarship.scholarship_type
 Î“Â¥Â» ScholarshipCreator.createScholarship electron/main/services/finance/ScholarshipService.ts:273:13
    271| 
    272|     } catch (error) {
    273|       throw new Error(`Failed to create scholarship: ${(error as ErrorÎ“Ã‡Âª
       |             ^
    274|     }
    275|   }
 Î“Â¥Â» processTicksAndRejections node:internal/process/task_queues:103:5

This error originated in "electron/main/services/finance/__tests__/ScholarshipService.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
SqliteError: no such table: fee_invoice
 Î“Â¥Â» Database.prepare node_modules/better-sqlite3-multiple-ciphers/lib/methods/wrappers.js:5:21
 Î“Â¥Â» ProfitabilityRepository.getActivityFeeRevenue electron/main/services/reports/SegmentProfitabilityService.ts:84:23
     82|   async getActivityFeeRevenue(): Promise<number> {
     83|     const db = this.db
     84|     const result = db.prepare(`
       |                       ^
     85|       SELECT SUM(amount) as total FROM fee_invoice
     86|       WHERE fee_type = 'ACTIVITY'
 Î“Â¥Â» ActivityFeeAnalyzer.analyzeActivityFees electron/main/services/reports/SegmentProfitabilityService.ts:242:37
 Î“Â¥Â» SegmentProfitabilityService.analyzeActivityFees electron/main/services/reports/SegmentProfitabilityService.ts:382:34
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:196:30
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:145:11
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:915:26
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1243:20
 Î“Â¥Â» runWithTimeout ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1209:10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { code: 'SQLITE_ERROR' }
This error originated in "electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Error: Failed to record payment: Failed to validate payment: no such table: fee_invoice
 Î“Â¥Â» PaymentService.recordPayment electron/main/services/finance/PaymentService.ts:462:13
    460|       }
    461|     } catch (error) {
    462|       throw new Error(`Failed to record payment: ${(error as Error).meÎ“Ã‡Âª
       |             ^
    463|     }
    464|   }
 Î“Â¥Â» processTicksAndRejections node:internal/process/task_queues:103:5

This error originated in "electron/main/__tests__/integration/workflows.integration.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Error: Failed to create scholarship: NOT NULL constraint failed: scholarship.scholarship_type
 Î“Â¥Â» ScholarshipCreator.createScholarship electron/main/services/finance/ScholarshipService.ts:273:13
    271| 
    272|     } catch (error) {
    273|       throw new Error(`Failed to create scholarship: ${(error as ErrorÎ“Ã‡Âª
       |             ^
    274|     }
    275|   }
 Î“Â¥Â» processTicksAndRejections node:internal/process/task_queues:103:5

This error originated in "electron/main/services/finance/__tests__/ScholarshipService.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
SqliteError: no such table: fee_invoice
 Î“Â¥Â» Database.prepare node_modules/better-sqlite3-multiple-ciphers/lib/methods/wrappers.js:5:21
 Î“Â¥Â» ProfitabilityRepository.getActivityFeeRevenue electron/main/services/reports/SegmentProfitabilityService.ts:84:23
     82|   async getActivityFeeRevenue(): Promise<number> {
     83|     const db = this.db
     84|     const result = db.prepare(`
       |                       ^
     85|       SELECT SUM(amount) as total FROM fee_invoice
     86|       WHERE fee_type = 'ACTIVITY'
 Î“Â¥Â» ActivityFeeAnalyzer.analyzeActivityFees electron/main/services/reports/SegmentProfitabilityService.ts:242:37
 Î“Â¥Â» SegmentProfitabilityService.analyzeActivityFees electron/main/services/reports/SegmentProfitabilityService.ts:382:34
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:205:30
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:145:11
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:915:26
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1243:20
 Î“Â¥Â» runWithTimeout ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1209:10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { code: 'SQLITE_ERROR' }
This error originated in "electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Error: Failed to record payment: Failed to validate payment: no such table: fee_invoice
 Î“Â¥Â» PaymentService.recordPayment electron/main/services/finance/PaymentService.ts:462:13
    460|       }
    461|     } catch (error) {
    462|       throw new Error(`Failed to record payment: ${(error as Error).meÎ“Ã‡Âª
       |             ^
    463|     }
    464|   }
 Î“Â¥Â» processTicksAndRejections node:internal/process/task_queues:103:5

This error originated in "electron/main/__tests__/integration/workflows.integration.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Error: Failed to create scholarship: NOT NULL constraint failed: scholarship.scholarship_type
 Î“Â¥Â» ScholarshipCreator.createScholarship electron/main/services/finance/ScholarshipService.ts:273:13
    271| 
    272|     } catch (error) {
    273|       throw new Error(`Failed to create scholarship: ${(error as ErrorÎ“Ã‡Âª
       |             ^
    274|     }
    275|   }
 Î“Â¥Â» processTicksAndRejections node:internal/process/task_queues:103:5

This error originated in "electron/main/services/finance/__tests__/ScholarshipService.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
SqliteError: no such table: fee_invoice
 Î“Â¥Â» Database.prepare node_modules/better-sqlite3-multiple-ciphers/lib/methods/wrappers.js:5:21
 Î“Â¥Â» ProfitabilityRepository.getActivityFeeRevenue electron/main/services/reports/SegmentProfitabilityService.ts:84:23
     82|   async getActivityFeeRevenue(): Promise<number> {
     83|     const db = this.db
     84|     const result = db.prepare(`
       |                       ^
     85|       SELECT SUM(amount) as total FROM fee_invoice
     86|       WHERE fee_type = 'ACTIVITY'
 Î“Â¥Â» ActivityFeeAnalyzer.analyzeActivityFees electron/main/services/reports/SegmentProfitabilityService.ts:242:37
 Î“Â¥Â» SegmentProfitabilityService.analyzeActivityFees electron/main/services/reports/SegmentProfitabilityService.ts:382:34
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:212:30
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:145:11
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:915:26
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1243:20
 Î“Â¥Â» runWithTimeout ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1209:10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { code: 'SQLITE_ERROR' }
This error originated in "electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Error: Failed to create scholarship: NOT NULL constraint failed: scholarship.scholarship_type
 Î“Â¥Â» ScholarshipCreator.createScholarship electron/main/services/finance/ScholarshipService.ts:273:13
    271| 
    272|     } catch (error) {
    273|       throw new Error(`Failed to create scholarship: ${(error as ErrorÎ“Ã‡Âª
       |             ^
    274|     }
    275|   }
 Î“Â¥Â» processTicksAndRejections node:internal/process/task_queues:103:5

This error originated in "electron/main/services/finance/__tests__/ScholarshipService.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
SqliteError: no such table: fee_invoice
 Î“Â¥Â» Database.prepare node_modules/better-sqlite3-multiple-ciphers/lib/methods/wrappers.js:5:21
 Î“Â¥Â» ProfitabilityRepository.getActivityFeeRevenue electron/main/services/reports/SegmentProfitabilityService.ts:84:23
     82|   async getActivityFeeRevenue(): Promise<number> {
     83|     const db = this.db
     84|     const result = db.prepare(`
       |                       ^
     85|       SELECT SUM(amount) as total FROM fee_invoice
     86|       WHERE fee_type = 'ACTIVITY'
 Î“Â¥Â» ActivityFeeAnalyzer.analyzeActivityFees electron/main/services/reports/SegmentProfitabilityService.ts:242:37
 Î“Â¥Â» SegmentProfitabilityService.analyzeActivityFees electron/main/services/reports/SegmentProfitabilityService.ts:382:34
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:222:30
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:145:11
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:915:26
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1243:20
 Î“Â¥Â» runWithTimeout ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1209:10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { code: 'SQLITE_ERROR' }
This error originated in "electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Error: Failed to create scholarship: NOT NULL constraint failed: scholarship.scholarship_type
 Î“Â¥Â» ScholarshipCreator.createScholarship electron/main/services/finance/ScholarshipService.ts:273:13
    271| 
    272|     } catch (error) {
    273|       throw new Error(`Failed to create scholarship: ${(error as ErrorÎ“Ã‡Âª
       |             ^
    274|     }
    275|   }
 Î“Â¥Â» processTicksAndRejections node:internal/process/task_queues:103:5

This error originated in "electron/main/services/finance/__tests__/ScholarshipService.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
SqliteError: no such table: fee_invoice
 Î“Â¥Â» Database.prepare node_modules/better-sqlite3-multiple-ciphers/lib/methods/wrappers.js:5:21
 Î“Â¥Â» ProfitabilityRepository.getActivityFeeRevenue electron/main/services/reports/SegmentProfitabilityService.ts:84:23
     82|   async getActivityFeeRevenue(): Promise<number> {
     83|     const db = this.db
     84|     const result = db.prepare(`
       |                       ^
     85|       SELECT SUM(amount) as total FROM fee_invoice
     86|       WHERE fee_type = 'ACTIVITY'
 Î“Â¥Â» ActivityFeeAnalyzer.analyzeActivityFees electron/main/services/reports/SegmentProfitabilityService.ts:242:37
 Î“Â¥Â» SegmentProfitabilityService.analyzeActivityFees electron/main/services/reports/SegmentProfitabilityService.ts:382:34
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:230:30
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:145:11
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:915:26
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1243:20
 Î“Â¥Â» runWithTimeout ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1209:10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { code: 'SQLITE_ERROR' }
This error originated in "electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
SqliteError: no such table: fee_invoice
 Î“Â¥Â» Database.prepare node_modules/better-sqlite3-multiple-ciphers/lib/methods/wrappers.js:5:21
 Î“Â¥Â» ProfitabilityRepository.getActivityFeeRevenue electron/main/services/reports/SegmentProfitabilityService.ts:84:23
     82|   async getActivityFeeRevenue(): Promise<number> {
     83|     const db = this.db
     84|     const result = db.prepare(`
       |                       ^
     85|       SELECT SUM(amount) as total FROM fee_invoice
     86|       WHERE fee_type = 'ACTIVITY'
 Î“Â¥Â» ActivityFeeAnalyzer.analyzeActivityFees electron/main/services/reports/SegmentProfitabilityService.ts:242:37
 Î“Â¥Â» SegmentProfitabilityService.analyzeActivityFees electron/main/services/reports/SegmentProfitabilityService.ts:382:34
 Î“Â¥Â» electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts:343:30
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:145:11
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:915:26
 Î“Â¥Â» ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1243:20
 Î“Â¥Â» runWithTimeout ../../MWINGI%20ADVENTIST%20SCHOOL/mwingi-school-erp/node_modules/@vitest/runner/dist/index.js:1209:10

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { code: 'SQLITE_ERROR' }
This error originated in "electron/main/services/reports/__tests__/SegmentProfitabilityService.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»


[2m Test Files [22m [1m[31m11 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (15)[39m
[2m      Tests [22m [1m[31m251 failed[39m[22m[2m | [22m[1m[32m37 passed[39m[22m[90m (288)[39m
[2m     Errors [22m [1m[31m21 errors[39m[22m
[2m   Start at [22m 00:32:46
[2m   Duration [22m 3.74s[2m (transform 2.72s, setup 0ms, import 7.81s, tests 1.19s, environment 4ms)[22m

